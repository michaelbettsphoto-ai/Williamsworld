<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>William's World - Quest Tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel:wght@700;900&family=Permanent+Marker&display=swap" rel="stylesheet">
</head>
<body>

<style>
  :root{
    --bg0:#1a0e2e; --bg1:#1c1028; --panel:rgba(30,15,40,0.85); --ink:#fff5e6; --muted:#e6d4b8;
    --line:#c8942a; --gold:#ffd36e; --green:#7dffb4; --blue:#d4a530;
    --purple:#7c3aed; --orange:#ff9d5c; --red:#dc2626; 
    --golden-border:#d4a530; --warm-glow:rgba(212,165,48,0.6);
    --shadow:0 18px 60px rgba(0,0,0,.45); --r1:22px; --r2:16px; --pad:16px; --max:1280px;
    --font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    --fantasy-font:'Cinzel', 'MedievalSharp', serif;
    --glass-bg:rgba(20,10,35,.25);
    --glass-blur:blur(18px) saturate(1.3);
    --glass-strong-bg:rgba(20,10,35,.35);
  }
  
  /* Animated background */
  @keyframes starfield {
    0%, 100% { opacity: .3; transform: scale(1); }
    50% { opacity: .8; transform: scale(1.1); }
  }
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: .6; }
  }
  @keyframes glow {
    0%, 100% { box-shadow: 0 0 10px rgba(255,211,110,.3), 0 0 20px rgba(255,211,110,.2); }
    50% { box-shadow: 0 0 20px rgba(255,211,110,.6), 0 0 40px rgba(255,211,110,.4); }
  }
  @keyframes shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }
  @keyframes sparkle {
    0%, 100% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1); }
  }
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes celebrate {
    0% { transform: scale(0) rotate(0deg); opacity: 0; }
    50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
    100% { transform: scale(1) rotate(360deg); opacity: 1; }
  }
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  /* William Character Animations - 15 different actions */
  @keyframes william-jump {
    0%, 100% { transform: translateY(0) scale(1); }
    30% { transform: translateY(-30px) scale(1.05); }
    60% { transform: translateY(-20px) scale(1.02); }
  }
  @keyframes william-spin {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.1); }
    100% { transform: rotate(360deg) scale(1); }
  }
  @keyframes william-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px) rotate(-5deg); }
    75% { transform: translateX(10px) rotate(5deg); }
  }
  @keyframes william-flip {
    0% { transform: rotateY(0deg); }
    50% { transform: rotateY(180deg) scale(1.1); }
    100% { transform: rotateY(360deg); }
  }
  @keyframes william-wave {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-15deg); }
    75% { transform: rotate(15deg); }
  }
  @keyframes william-pulse-glow {
    0%, 100% { transform: scale(1); filter: brightness(1) drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }
    50% { transform: scale(1.15); filter: brightness(1.3) drop-shadow(0 8px 16px rgba(255,211,110,0.6)); }
  }
  @keyframes william-bounce-rotate {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-20px) rotate(-10deg); }
    50% { transform: translateY(0) rotate(0deg); }
    75% { transform: translateY(-15px) rotate(10deg); }
  }
  @keyframes william-swing {
    0%, 100% { transform: rotate(0deg) translateX(0); }
    25% { transform: rotate(20deg) translateX(10px); }
    75% { transform: rotate(-20deg) translateX(-10px); }
  }
  @keyframes william-zoom {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.3); }
  }
  @keyframes william-slide {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(30px); }
  }
  @keyframes william-wobble {
    0%, 100% { transform: rotate(0deg) scale(1); }
    25% { transform: rotate(10deg) scale(1.05); }
    50% { transform: rotate(-10deg) scale(1.1); }
    75% { transform: rotate(5deg) scale(1.05); }
  }
  @keyframes william-float-spin {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-25px) rotate(360deg); }
  }
  @keyframes william-bounce-scale {
    0%, 100% { transform: scale(1) translateY(0); }
    50% { transform: scale(0.8) translateY(-25px); }
  }
  @keyframes william-rainbow {
    0% { filter: hue-rotate(0deg) brightness(1) drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }
    25% { filter: hue-rotate(90deg) brightness(1.2) drop-shadow(0 8px 16px rgba(255,0,255,0.5)); }
    50% { filter: hue-rotate(180deg) brightness(1.3) drop-shadow(0 8px 16px rgba(0,255,255,0.5)); }
    75% { filter: hue-rotate(270deg) brightness(1.2) drop-shadow(0 8px 16px rgba(255,255,0,0.5)); }
    100% { filter: hue-rotate(360deg) brightness(1) drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }
  }
  @keyframes william-victory {
    0%, 100% { transform: translateY(0) scale(1) rotate(0deg); }
    20% { transform: translateY(-15px) scale(1.1) rotate(-5deg); }
    40% { transform: translateY(-10px) scale(1.15) rotate(5deg); }
    60% { transform: translateY(-20px) scale(1.1) rotate(-3deg); }
    80% { transform: translateY(-5px) scale(1.05) rotate(3deg); }
  }
  
  /* Fun Animations for Kids! */
  @keyframes william-fire {
    0% { transform: scale(1); filter: brightness(1) drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }
    20% { transform: scale(1.1) rotate(-10deg); filter: brightness(1.3) drop-shadow(0 0 20px rgba(255,100,0,0.8)); }
    40% { transform: scale(1.15) rotate(5deg); filter: brightness(1.5) drop-shadow(0 0 30px rgba(255,50,0,0.9)); }
    60% { transform: scale(1.1) rotate(-5deg); filter: brightness(1.4) drop-shadow(0 0 25px rgba(255,80,0,0.8)); }
    80% { transform: scale(1.05); filter: brightness(1.2) drop-shadow(0 0 15px rgba(255,120,0,0.6)); }
    100% { transform: scale(1); filter: brightness(1) drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }
  }
  @keyframes william-fart {
    0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); }
    10% { transform: translateX(-5px) translateY(3px) rotate(-2deg); }
    20% { transform: translateX(8px) translateY(-2px) rotate(3deg); }
    30% { transform: translateX(-6px) translateY(2px) rotate(-3deg); }
    40% { transform: translateX(7px) translateY(-3px) rotate(2deg); }
    50% { transform: translateX(-8px) translateY(4px) rotate(-2deg); }
    60% { transform: translateX(6px) translateY(-2px) rotate(3deg); }
    70% { transform: translateX(-4px) translateY(2px) rotate(-1deg); }
    80% { transform: translateX(3px) translateY(-1px) rotate(1deg); }
  }
  @keyframes william-throw {
    0% { transform: rotate(0deg) translateX(0); }
    30% { transform: rotate(-30deg) translateX(-15px); }
    50% { transform: rotate(20deg) translateX(10px) scale(1.1); }
    70% { transform: rotate(5deg) translateX(5px); }
    100% { transform: rotate(0deg) translateX(0); }
  }
  @keyframes william-burp {
    0%, 100% { transform: scale(1); }
    20% { transform: scale(1.15, 0.9); }
    40% { transform: scale(0.95, 1.1); }
    60% { transform: scale(1.1, 0.95); }
    80% { transform: scale(0.98, 1.05); }
  }
  @keyframes william-sneeze {
    0%, 100% { transform: translateY(0) scale(1); }
    10% { transform: translateY(-5px) scale(1.05, 0.95); }
    30% { transform: translateY(-10px) scale(1.1, 0.9); }
    50% { transform: translateY(8px) scale(0.9, 1.15); }
    70% { transform: translateY(-3px) scale(1.05, 0.98); }
  }
  @keyframes william-dizzy {
    0% { transform: rotate(0deg); filter: blur(0px); }
    25% { transform: rotate(90deg); filter: blur(2px); }
    50% { transform: rotate(180deg); filter: blur(3px); }
    75% { transform: rotate(270deg); filter: blur(2px); }
    100% { transform: rotate(360deg); filter: blur(0px); }
  }
  @keyframes william-dance {
    0%, 100% { transform: rotate(0deg) translateX(0) scale(1); }
    15% { transform: rotate(-15deg) translateX(-10px) scale(1.05); }
    30% { transform: rotate(15deg) translateX(10px) scale(1.1); }
    45% { transform: rotate(-10deg) translateX(-8px) scale(1.05); }
    60% { transform: rotate(10deg) translateX(8px) scale(1.08); }
    75% { transform: rotate(-5deg) translateX(-5px) scale(1.03); }
  }
  @keyframes william-explode {
    0% { transform: scale(1) rotate(0deg); filter: brightness(1); }
    30% { transform: scale(0.8) rotate(-20deg); filter: brightness(1.2); }
    50% { transform: scale(1.5) rotate(180deg); filter: brightness(2); }
    70% { transform: scale(1.3) rotate(270deg); filter: brightness(1.5); }
    100% { transform: scale(1) rotate(360deg); filter: brightness(1); }
  }
  @keyframes william-water-balloon {
    0% { transform: rotate(0deg) translateX(0) scale(1); }
    20% { transform: rotate(-45deg) translateX(-20px) scale(1.1); }
    50% { transform: rotate(20deg) translateX(10px) scale(1.05); }
    100% { transform: rotate(0deg) translateX(0) scale(1); }
  }
  @keyframes william-slip-out {
    0% { transform: translateX(0) translateY(0) rotate(0deg); }
    20% { transform: translateX(50px) translateY(-30px) rotate(15deg) scale(0.95); }
    40% { transform: translateX(100px) translateY(-20px) rotate(-10deg) scale(0.9); }
    60% { transform: translateX(150px) translateY(-40px) rotate(20deg) scale(0.95); }
    80% { transform: translateX(100px) translateY(-20px) rotate(-5deg) scale(0.95); }
    100% { transform: translateX(0) translateY(0) rotate(0deg) scale(1); }
  }
  
  /* Easter Egg Emotes (Click-Triggered) - 15 Animations */
  @keyframes easter-confetti-sneezus {
    0% { transform: scale(1); }
    20% { transform: scale(0.95, 1.05); } /* Scrunch face */
    40% { transform: scale(1.15, 0.9); } /* Big sneeze prep */
    50% { transform: scale(0.9, 1.1); } /* Sneeze! */
    70% { transform: scale(1.05, 0.98) rotate(-5deg); } /* Recoil */
    85% { transform: scale(1.02) rotate(2deg); } /* Blink confused */
    100% { transform: scale(1) rotate(0deg); }
  }
  @keyframes easter-banana-slip {
    0% { transform: translateX(0) translateY(0) rotate(0deg); }
    15% { transform: translateX(10px) translateY(-5px) rotate(-10deg); } /* Slip */
    30% { transform: translateX(20px) translateY(-15px) rotate(90deg) scale(0.95); } /* Flail */
    50% { transform: translateX(30px) translateY(-20px) rotate(180deg) scale(0.9); } /* Spin */
    70% { transform: translateX(20px) translateY(-5px) rotate(270deg) scale(0.95); } /* More spin */
    85% { transform: translateX(0) translateY(0) rotate(360deg) scale(1.05); } /* Landing */
    100% { transform: translateX(0) translateY(0) rotate(360deg) scale(1); } /* Seated + thumbs up */
  }
  @keyframes easter-bubble-burp {
    0% { transform: scale(1); }
    20% { transform: scale(1.1, 0.95); } /* Tiny burp prep */
    40% { transform: scale(0.95, 1.05); } /* Burp */
    60% { transform: scale(1.02, 0.98); }
    100% { transform: scale(1); }
  }
  @keyframes easter-pie-trap {
    0% { transform: translateX(0) rotate(0deg); }
    15% { transform: translateX(5px) rotate(5deg); } /* Trip */
    30% { transform: translateX(-5px) rotate(-5deg) scale(1.05); } /* Stumble */
    50% { transform: scale(0.95, 1.1) rotate(0deg); } /* Pie splat! */
    70% { transform: scale(1.05, 0.95); } /* Recoil */
    85% { transform: scale(1.02) rotate(-3deg); } /* Wipe face */
    100% { transform: scale(1) rotate(0deg); } /* "Really?" */
  }
  @keyframes easter-rubber-chicken {
    0% { transform: rotate(0deg) scale(1); }
    20% { transform: rotate(-15deg) scale(1.05); } /* Opens backpack */
    40% { transform: rotate(10deg) scale(1.1); } /* Chicken appears */
    60% { transform: rotate(-10deg) scale(1.08); } /* Squeeze */
    80% { transform: rotate(5deg) scale(1.03); } /* Poof prep */
    100% { transform: rotate(0deg) scale(1); } /* Away */
  }
  @keyframes easter-hero-landing {
    0% { transform: translateY(0) scale(1); }
    30% { transform: translateY(-15px) scale(1.05); } /* Tiny hop */
    60% { transform: translateY(0) scale(1.1, 0.9) rotate(-3deg); } /* Dramatic landing */
    80% { transform: scale(1.05) rotate(2deg); } /* Impact */
    100% { transform: scale(1) rotate(0deg); } /* Shrug */
  }
  @keyframes easter-endless-scarf {
    0% { transform: translateX(0) scale(1); }
    30% { transform: translateX(-10px) scale(1.05) rotate(-5deg); } /* Pull scarf */
    60% { transform: translateX(-15px) scale(1.08) rotate(-8deg); } /* More scarf */
    80% { transform: translateX(-8px) scale(1.03) rotate(-3deg); } /* Piles up */
    90% { transform: translateX(5px) scale(0.98) rotate(5deg); } /* Light trip */
    100% { transform: translateX(0) scale(1) rotate(0deg); }
  }
  @keyframes easter-frog-crown {
    0% { transform: scale(1) rotate(0deg); }
    20% { transform: scale(1.05) rotate(-10deg); } /* Cast gesture */
    40% { transform: scale(1.1) rotate(10deg); } /* Frog pops on head */
    60% { transform: scale(1.08) rotate(-5deg); }
    80% { transform: scale(1.03) rotate(3deg); } /* Ribbit */
    100% { transform: scale(1) rotate(0deg); } /* Smile */
  }
  @keyframes easter-chipmunk-voice {
    0% { transform: scale(1); }
    20% { transform: scale(1.05, 0.98) rotate(-5deg); } /* Drinks potion */
    40% { transform: scale(0.95, 1.1) rotate(5deg); } /* Musical notes */
    60% { transform: scale(1.08, 0.95) rotate(-3deg); } /* Squeaky talking */
    80% { transform: scale(0.98, 1.05) rotate(3deg); }
    100% { transform: scale(1) rotate(0deg); }
  }
  @keyframes easter-marshmallow-volley {
    0% { transform: rotate(0deg) scale(1); }
    20% { transform: rotate(-20deg) scale(1.05); } /* Fires */
    40% { transform: rotate(10deg) scale(1.08); } /* Rebound */
    60% { transform: scale(1.1, 0.95) rotate(0deg); } /* Bonk forehead */
    80% { transform: scale(0.95, 1.05) rotate(-5deg); } /* Wobble */
    100% { transform: scale(1) rotate(0deg); }
  }
  @keyframes easter-hair-tornado {
    0% { transform: rotate(0deg) scale(1); }
    20% { transform: rotate(180deg) scale(1.1); } /* Mini whirlwind */
    40% { transform: rotate(360deg) scale(1.15); } /* Spins */
    60% { transform: rotate(540deg) scale(1.1); } /* Wild hair */
    80% { transform: rotate(720deg) scale(1.05); } /* Tries to fix */
    100% { transform: rotate(720deg) scale(1); } /* Shocked */
  }
  @keyframes easter-tiger-shuffle {
    0%, 100% { transform: translateX(0) rotate(0deg) scale(1); }
    15% { transform: translateX(-15px) rotate(-10deg) scale(1.05); } /* Dance left */
    30% { transform: translateX(15px) rotate(10deg) scale(1.08); } /* Dance right */
    45% { transform: translateX(-12px) rotate(-8deg) scale(1.05); }
    60% { transform: translateX(12px) rotate(8deg) scale(1.08); }
    75% { transform: translateX(-8px) rotate(-5deg) scale(1.03); }
    90% { transform: translateX(0) rotate(0deg) scale(1.05); }
  }
  @keyframes easter-lego-step {
    0% { transform: translateY(0) scale(1); }
    20% { transform: translateY(-10px) scale(1.05, 0.98); } /* "Ouch" face */
    40% { transform: translateY(-25px) scale(1.08, 0.95) rotate(-10deg); } /* One-foot hop */
    60% { transform: translateY(-15px) scale(1.05, 0.98) rotate(5deg); }
    80% { transform: translateY(-5px) scale(1.02) rotate(-3deg); } /* Shakes foot */
    100% { transform: translateY(0) scale(1) rotate(0deg); } /* Points at ground */
  }
  @keyframes easter-goose-chase {
    0%, 100% { transform: translateX(0) rotate(0deg) scale(1); }
    20% { transform: translateX(20px) rotate(10deg) scale(1.05); } /* Goose honks */
    40% { transform: translateX(40px) rotate(-10deg) scale(1.08); } /* Chase */
    60% { transform: translateX(20px) rotate(5deg) scale(1.05); } /* More chase */
    80% { transform: translateX(-10px) rotate(-5deg) scale(1.02); } /* Feather gift */
    95% { transform: translateX(0) rotate(0deg) scale(1.05); } /* Friends */
  }
  @keyframes easter-sock-chest {
    0% { transform: scale(1) rotate(0deg); }
    15% { transform: scale(1.05) rotate(-5deg); } /* Opens chest */
    30% { transform: scale(1.1, 0.95) rotate(5deg); } /* Excited */
    50% { transform: scale(0.95, 1.1) rotate(-10deg); } /* Socks explode out */
    70% { transform: scale(1.05, 0.98) rotate(5deg); } /* Offended face */
    90% { transform: scale(1.02) rotate(-3deg); } /* Slow facepalm */
    100% { transform: scale(1) rotate(0deg); }
  }
  
  /* Easter Egg Rest State */
  @keyframes easter-rest-state {
    0%, 100% { transform: translateY(10px) rotate(-90deg) scale(1); } /* Laying down */
    50% { transform: translateY(12px) rotate(-90deg) scale(1.02); } /* Breathing */
  }
  
  /* Particle effect animations */
  @keyframes fireParticle {
    0% { transform: translateX(0) translateY(0) scale(1); opacity: 1; }
    100% { transform: translateX(100px) translateY(-50px) scale(0.5); opacity: 0; }
  }
  @keyframes fartParticle {
    0% { transform: translateX(0) translateY(0) scale(0.5); opacity: 1; }
    100% { transform: translateX(-80px) translateY(-60px) scale(2); opacity: 0; }
  }
  @keyframes throwParticle {
    0% { transform: translateX(0) translateY(0) rotate(0deg) scale(1); opacity: 1; }
    100% { transform: translateX(200px) translateY(-80px) rotate(720deg) scale(0.8); opacity: 0; }
  }
  @keyframes waterBalloonParticle {
    0% { transform: translateX(0) translateY(0) rotate(0deg) scale(1); opacity: 1; }
    70% { transform: translateX(180px) translateY(-60px) rotate(360deg) scale(1.1); opacity: 1; }
    85% { transform: translateX(200px) translateY(-50px) rotate(400deg) scale(1.3); opacity: 0.8; }
    100% { transform: translateX(220px) translateY(-40px) rotate(450deg) scale(0); opacity: 0; }
  }
  @keyframes waterSplash {
    0% { transform: scale(0) rotate(0deg); opacity: 1; }
    50% { transform: scale(1.5) rotate(180deg); opacity: 0.8; }
    100% { transform: scale(2) rotate(360deg); opacity: 0; }
  }
  @keyframes burpParticle {
    0% { transform: translateY(0) scale(0.8); opacity: 1; }
    100% { transform: translateY(-60px) scale(1.5); opacity: 0; }
  }
  @keyframes sneezeParticle {
    0% { transform: translateX(0) translateY(0) scale(1); opacity: 1; }
    100% { transform: translateX(80px) translateY(-50px) scale(0.3); opacity: 0; }
  }
  @keyframes explodeParticle {
    0% { transform: translate(0, 0) scale(1); opacity: 1; }
    100% { transform: translate(150px, -50px) scale(0.5); opacity: 0; }
  }
  
  body {
    margin: 0;
    padding: 0;
    background: 
      linear-gradient(180deg, rgba(26,10,46,.2) 0%, rgba(61,36,72,.15) 20%, rgba(139,74,63,.1) 40%, rgba(212,118,42,.1) 60%, rgba(61,36,72,.15) 80%, rgba(26,10,46,.2) 100%),
      url("./assets/images/ChatGPT%20Image%20Feb%208,%202026,%2012_39_11%20AM.png") center/cover no-repeat fixed;
    background-color: #0a0612;
    position: relative;
    overflow-x: hidden;
    min-height: 100vh;
  }
  
  /* Starfield background */
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(2px 2px at 20% 30%, #ffd36e, transparent),
      radial-gradient(2px 2px at 60% 70%, #ffd36e, transparent),
      radial-gradient(1px 1px at 50% 50%, #fff5e6, transparent),
      radial-gradient(1px 1px at 80% 10%, #ffd36e, transparent),
      radial-gradient(2px 2px at 90% 60%, #fff5e6, transparent),
      radial-gradient(1px 1px at 33% 80%, #ffd36e, transparent),
      radial-gradient(2px 2px at 75% 40%, #fff5e6, transparent);
    background-size: 200% 200%;
    animation: starfield 8s ease-in-out infinite;
    opacity: .15;
    pointer-events: none;
    z-index: 1;
  }
  #ww{font-family:var(--font); color:var(--ink); position: relative; z-index: 10;}
  #ww *{box-sizing:border-box}
  #ww .wrap{max-width:var(--max); margin:0 auto; padding:14px}
  #ww .topbar{
    position:sticky; top:0; z-index:60;
    background: var(--glass-strong-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border:2px solid var(--golden-border);
    border-radius:18px;
    padding:10px 12px;
    box-shadow: 0 0 15px rgba(212,165,48,.3);
  }
  #ww .topbar-inner{display:flex; gap:12px; justify-content:space-between; align-items:center; flex-wrap:wrap}
  #ww .brand{display:flex; gap:10px; align-items:center; font-weight:950}
  #ww .logoMark{width:34px; height:34px; border-radius:12px; border:2px solid var(--golden-border); overflow:hidden}
  #ww .logoMark img{width:100%;height:100%;object-fit:cover;display:block}
  #ww .badge{font-size:12px; padding:4px 9px; border:2px solid var(--golden-border); color:var(--gold); border-radius:999px; background: rgba(255,211,110,.15); font-weight:800}
  #ww .nav{display:flex; gap:8px; flex-wrap:wrap}
  #ww .nav button{
    border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); color:var(--ink);
    padding:8px 10px; border-radius:999px; cursor:pointer; font-weight:850; font-size:13px;
  }
  #ww .nav button.active{background: rgba(255,211,110,.25); border-color: var(--gold); box-shadow: 0 0 10px rgba(255,211,110,.4)}
  #ww .banner{
    margin-top:12px; border-radius:26px; border:3px solid var(--gold);
    box-shadow:var(--shadow), 0 0 30px rgba(240,168,48,.4); overflow:hidden; position:relative;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    min-height: 420px;
  }
  #ww .banner-inner{padding:18px; display:grid; grid-template-columns: 250px 1fr; gap:20px; align-items:center}
  #ww .banner-inner > .card{grid-column: 1 / -1}
  @media (max-width:980px){ #ww .banner-inner{grid-template-columns:1fr; justify-items:center} }
  #ww h1{margin:0 0 6px; font-size:48px; font-weight:900; color:var(--gold); 
    font-family: var(--fantasy-font);
    text-shadow: 
      3px 3px 0 rgba(0,0,0,.9), 
      -2px -2px 0 rgba(0,0,0,.9), 
      2px -2px 0 rgba(0,0,0,.9), 
      -2px 2px 0 rgba(0,0,0,.9),
      0 0 20px rgba(240,168,48,.7),
      0 0 40px rgba(240,168,48,.5);
    animation: float 3s ease-in-out infinite;
  }
  #ww .levelTitle {
    font-family: var(--fantasy-font);
    font-size: 20px;
    color: var(--gold);
    text-shadow: 2px 2px 4px rgba(0,0,0,.8);
    margin-top: 8px;
    font-weight: 700;
    letter-spacing: 1px;
  }
  #ww .levelClass {
    font-size: 16px;
    font-weight: 800;
    color: var(--green);
    margin-top: 4px;
  }
  #ww .william-avatar {
    width: 280px;
    height: 280px;
    border-radius: 0;
    border: none;
    overflow: visible;
    box-shadow: none;
    flex-shrink: 0;
    background: transparent;
    padding: 0;
    position: relative;
    z-index: 100;
    transition: transform 0.5s ease, filter 0.5s ease, left 0.5s ease, top 0.5s ease;
    pointer-events: auto;
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    margin: 10px;
  }
  #ww .william-avatar:hover {
    filter: drop-shadow(0 0 15px rgba(255,211,110,0.6));
  }
  #ww .william-avatar.clickable-glow {
    animation: glow 2s ease-in-out infinite;
  }
  #ww .william-avatar img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
  }
  #ww p{margin:0; color:var(--muted); font-weight:650; text-shadow: 1px 1px 2px rgba(0,0,0,.7)}
  #ww .ctaRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
  #ww .btn{
    border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); color:var(--ink);
    padding:12px 16px; border-radius:14px; cursor:pointer; font-weight:950; font-size:14px;
    transition: all .3s ease;
    position: relative;
    box-shadow: 0 4px 8px rgba(0,0,0,.3), inset 0 1px 0 rgba(255,255,255,.1), 0 0 10px rgba(240,168,48,.2);
  }
  #ww .btn:hover{
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,.4), inset 0 1px 0 rgba(255,255,255,.2), 0 0 20px rgba(255,211,110,.4);
  }
  #ww .btn:active{
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0,0,0,.3), inset 0 1px 0 rgba(0,0,0,.1);
  }
  #ww .btn.primary{
    background: var(--glass-bg); 
    border-color: var(--golden-border);
  }
  #ww .btn.gold{
    background: var(--glass-bg); 
    border-color: var(--gold);
  }
  #ww .btn.danger{
    background: var(--glass-bg); 
    border-color: rgba(255,107,138,.6);
  }
  #ww .statRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
  #ww .pill{border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border-radius:999px; padding:8px 10px; display:flex; gap:8px; align-items:center; font-weight:900; font-size:13px; text-shadow: 1px 1px 2px rgba(0,0,0,.7)}
  #ww .dot{width:10px;height:10px;border-radius:999px;background:var(--golden-border)}
  #ww .dot.green{background:var(--green)}
  #ww .dot.gold{background:var(--gold)}
  #ww .meter{border:2px solid var(--golden-border); border-radius:14px; background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); padding:10px; margin-top:10px}
  #ww .meterTop{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; margin-bottom:8px}
  #ww .small{font-size:12px; color:var(--muted); font-weight:650; text-shadow: 1px 1px 2px rgba(0,0,0,.7)}
  #ww .bar{height:16px;border-radius:999px;background: rgba(50,30,20,.65);overflow:hidden;border:2px solid var(--golden-border); position: relative;}
  #ww .bar > div{
    height:100%; width:0%; 
    background: linear-gradient(90deg, 
      rgba(255,211,110,.95), 
      rgba(255,170,50,.95), 
      rgba(255,211,110,.95)
    ); 
    background-size: 200% 100%;
    animation: shimmer 2s linear infinite;
    transition: width .5s ease;
    box-shadow: 0 0 10px rgba(255,211,110,.5), inset 0 1px 0 rgba(255,255,255,.3);
    position: relative;
  }
  #ww .bar > div::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.3), transparent);
    animation: shimmer 1.5s linear infinite;
  }
  #ww .grid{margin-top:14px; display:grid; grid-template-columns:1fr 1fr; gap:14px}
  @media (max-width:980px){ #ww .grid{grid-template-columns:1fr} }
  #ww .card{border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border-radius:var(--r1); box-shadow:var(--shadow), 0 0 15px rgba(255,211,110,.2); padding:var(--pad)}
  #ww .banner .card{background: var(--glass-strong-bg)}
  #ww .card h2{margin:0 0 10px; font-size:15px; display:flex; justify-content:space-between; align-items:center; gap:10px; text-shadow: 1px 1px 3px rgba(0,0,0,.8)}
  #ww .tag{font-size:12px; padding:6px 10px; border-radius:999px; border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); color:var(--gold); font-weight:900}
  #ww .frame{border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border-radius:var(--r2); padding:12px}
  #ww .taskList{display:grid; gap:10px; margin-top:10px}
  #ww .task{display:grid; grid-template-columns:28px 1fr auto; gap:10px; align-items:center; border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border-radius:16px; padding:10px}
  #ww .task input{width:20px;height:20px; accent-color: var(--green)}
  #ww .task .name{font-weight:950}
  #ww .task .xp{font-weight:1000; padding:6px 9px; border-radius:999px; border:2px solid rgba(255,211,110,.55); background: rgba(255,211,110,.15); font-size:12px; min-width:74px; text-align:center; color:var(--gold)}
  #ww .party{display:grid; grid-template-columns:repeat(3, 1fr); gap:10px; margin-top:10px}
  @media (max-width:520px){ #ww .party{grid-template-columns:1fr} }
  #ww .creature{border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border-radius:16px; padding:10px; display:flex; gap:10px; align-items:center}
  #ww .avatar{width:42px;height:42px;border-radius:16px;border:2px solid var(--golden-border);overflow:hidden}
  #ww .avatar img{width:100%;height:100%;object-fit:cover;display:block}
  #ww .map{display:grid; gap:10px; margin-top:10px}
  #ww .node{border:2px solid var(--golden-border); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border-radius:16px; padding:10px; display:flex; justify-content:space-between; align-items:center; gap:10px}
  #ww .node .left{display:flex; gap:10px; align-items:center}
  #ww .node .icon{width:36px;height:36px;border-radius:14px;border:2px solid var(--golden-border); overflow:hidden}
  #ww .node .icon img{width:100%;height:100%;object-fit:cover;display:block}
  #ww .toast{
    position:fixed; left:50%; bottom:24px; transform:translateX(-50%); 
    background: var(--glass-strong-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border:2px solid var(--golden-border); 
    padding:16px 24px; border-radius:16px; 
    box-shadow:var(--shadow), 0 0 30px rgba(255,211,110,.5); 
    display:none; z-index:999; 
    font-weight:900; font-size:16px;
    animation: slideUp .3s ease-out;
    min-width: 200px;
    text-align: center;
    text-shadow: 1px 1px 3px rgba(0,0,0,.8);
  }
  
  /* Floating XP animation */
  @keyframes floatXP {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-50px) scale(1.2); }
  }
  .floatingXP {
    position: fixed;
    font-weight: 900;
    font-size: 24px;
    color: var(--green);
    text-shadow: 2px 2px 4px rgba(0,0,0,.8), 0 0 10px var(--green);
    pointer-events: none;
    z-index: 1000;
    animation: floatXP 1.5s ease-out forwards;
  }
  
  /* Level-Up Celebration Overlay */
  #levelUpOverlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,.85);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn .3s ease-out;
  }
  #levelUpOverlay.show {
    display: flex;
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  #levelUpOverlay .content {
    text-align: center;
    animation: celebrate .6s ease-out;
  }
  #levelUpOverlay .content h2 {
    font-size: 72px;
    font-family: var(--fantasy-font);
    color: var(--gold);
    text-shadow: 
      4px 4px 0 rgba(0,0,0,.9),
      0 0 30px rgba(240,168,48,.9),
      0 0 60px rgba(240,168,48,.6);
    margin: 0 0 20px;
    animation: pulse 1s ease-in-out infinite;
  }
  #levelUpOverlay .levelInfo {
    font-size: 32px;
    font-family: var(--fantasy-font);
    color: var(--ink);
    margin-bottom: 10px;
  }
  #levelUpOverlay .levelTitle {
    font-size: 28px;
    color: var(--gold);
  }
  #levelUpOverlay .levelSummary {
    margin-top: 16px;
    display: grid;
    gap: 8px;
  }
  #levelUpOverlay .levelName {
    font-size: 24px;
    font-weight: 900;
    color: var(--gold);
  }
  #levelUpOverlay .levelClass {
    font-size: 20px;
    color: var(--green);
    font-weight: 800;
  }
  #levelUpOverlay .levelStats,
  #levelUpOverlay .levelAbilities {
    font-size: 16px;
    color: var(--ink);
    text-shadow: 1px 1px 3px rgba(0,0,0,.7);
  }
  #levelUpOverlay .levelAbilities ul {
    list-style: none;
    margin: 6px 0 0;
    padding: 0;
  }
  #levelUpOverlay .levelAbilities li {
    margin: 4px 0;
  }
  #levelUpOverlay .william-avatar-overlay {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 5px solid var(--gold);
    overflow: hidden;
    box-shadow: 0 0 30px rgba(255,211,110,.6), 0 0 60px rgba(255,211,110,.3);
    margin: 0 auto 20px;
    animation: pulse 2s ease-in-out infinite;
  }
  #levelUpOverlay .william-avatar-overlay img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  @keyframes particles {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-100px) scale(0); opacity: 0; }
  }
  .particle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: var(--gold);
    border-radius: 50%;
    animation: particles 2s ease-out forwards;
    pointer-events: none;
  }
  
  /* William Rest State Overlay */
  #williamRestOverlay {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--glass-strong-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 3px solid var(--golden-border);
    border-radius: var(--r1);
    padding: 24px;
    display: none;
    z-index: 10001;
    text-align: center;
    box-shadow: var(--shadow), 0 0 30px rgba(255,211,110,.4);
    animation: slideUp .3s ease-out;
    max-width: 90%;
    width: 400px;
  }
  #williamRestOverlay.show {
    display: block;
  }
  #williamRestOverlay .message {
    font-size: 20px;
    font-weight: 900;
    color: var(--ink);
    text-shadow: 2px 2px 4px rgba(0,0,0,.8);
    margin-bottom: 12px;
  }
  #williamRestOverlay .countdown {
    font-size: 16px;
    color: var(--muted);
    font-weight: 650;
  }
  #williamRestOverlay .zzz {
    font-size: 32px;
    animation: float 2s ease-in-out infinite;
    margin-top: 10px;
  }
  
  /* Companion Party Styles */
  #ww .companion {
    border: 3px solid var(--line);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 18px;
    padding: 16px;
    transition: all .3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,.3), 0 0 10px rgba(240,168,48,.2);
  }
  #ww .companion:hover {
    transform: translateY(-4px);
    border-color: var(--gold);
    box-shadow: 0 8px 20px rgba(0,0,0,.5), 0 0 20px rgba(240,168,48,.4);
  }
  #ww .companion .header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }
  #ww .companion .avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 3px solid var(--gold);
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,.5);
  }
  #ww .companion .avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  #ww .companion .info {
    flex: 1;
  }
  #ww .companion .name {
    font-size: 18px;
    font-weight: 900;
    color: var(--gold);
    font-family: var(--fantasy-font);
  }
  #ww .companion .type {
    font-size: 13px;
    color: var(--muted);
    font-weight: 700;
  }
  #ww .companion .level {
    font-size: 14px;
    font-weight: 900;
    color: var(--green);
    margin-top: 4px;
  }
  #ww .companion .statBar {
    margin-top: 8px;
  }
  #ww .companion .statLabel {
    font-size: 11px;
    color: var(--muted);
    font-weight: 700;
    margin-bottom: 4px;
  }
  #ww .companion .bar {
    height: 8px;
  }
  #ww .companion.evolved {
    border-color: var(--gold);
    box-shadow: 0 0 25px rgba(240,168,48,.5), 0 4px 12px rgba(0,0,0,.3);
  }
  
  /* World Map Zone Styles */
  #ww .zone {
    border: 3px solid var(--golden-border);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 18px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 16px;
    transition: all .3s ease;
    position: relative;
    overflow: hidden;
  }
  #ww .zone::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent, rgba(255,255,255,.03), transparent);
    transform: translateX(-100%);
    transition: transform .6s ease;
  }
  #ww .zone:hover::before {
    transform: translateX(100%);
  }
  #ww .zone .zoneIcon {
    width: 80px;
    height: 80px;
    border-radius: 16px;
    border: 3px solid var(--golden-border);
    overflow: hidden;
    flex-shrink: 0;
    box-shadow: 0 4px 12px rgba(0,0,0,.5);
  }
  #ww .zone .zoneIcon img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  #ww .zone .zoneInfo {
    flex: 1;
  }
  #ww .zone .zoneName {
    font-size: 18px;
    font-weight: 900;
    color: var(--gold);
    font-family: var(--fantasy-font);
    margin-bottom: 6px;
  }
  #ww .zone .zoneStatus {
    font-size: 13px;
    font-weight: 800;
    padding: 4px 12px;
    border-radius: 999px;
    display: inline-block;
  }
  #ww .zone .zoneStatus.locked {
    background: rgba(255,107,138,.15);
    border: 2px solid rgba(255,107,138,.4);
    color: rgba(255,107,138,.9);
  }
  #ww .zone .zoneStatus.unlocked {
    background: rgba(125,255,180,.15);
    border: 2px solid var(--green);
    color: var(--green);
  }
  #ww .zone.locked {
    opacity: .5;
    filter: grayscale(80%);
  }
  #ww .zone.unlocked {
    border-color: var(--green);
    box-shadow: 0 0 25px rgba(125,255,180,.3), 0 4px 12px rgba(0,0,0,.3);
  }
  #ww .zone.unlocked:hover {
    transform: translateY(-4px);
    box-shadow: 0 0 35px rgba(125,255,180,.5), 0 8px 20px rgba(0,0,0,.5);
  }
  #ww .lockIcon {
    font-size: 32px;
    opacity: .5;
  }
  
  /* HP Bar Styles */
  #ww .hpMeter { margin-top: 8px; }
  #ww .hpMeter .bar { background: #1a0a0a; }
  #ww .hpMeter .bar > div { background: linear-gradient(90deg, #dc2626, #ff4444); transition: width .4s ease; }
  #ww .hpMeter.low .bar > div { background: linear-gradient(90deg, #991b1b, #dc2626); animation: pulse 1s ease-in-out infinite; }
  #ww .hpPill .dot { background: var(--red); }
  
  /* Quest Map Sidebar Styles */
  #ww .questMapSidebar {
    border: 2px solid var(--golden-border);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 18px;
    padding: 16px;
    box-shadow: var(--shadow), 0 0 15px rgba(255,211,110,.2);
  }
  
  #ww .questMapSidebar h3 {
    margin: 0 0 12px 0;
    font-size: 16px;
    font-weight: 900;
    color: var(--gold);
    font-family: var(--fantasy-font);
  }
  
  #ww .zoneIconList {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  
  #ww .zoneIconItem {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px;
    border: 2px solid var(--golden-border);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 12px;
    transition: all .3s ease;
    cursor: pointer;
  }
  
  #ww .zoneIconItem:hover {
    transform: translateX(4px);
    border-color: var(--gold);
    box-shadow: 0 0 15px rgba(255,211,110,.3);
  }
  
  #ww .zoneIconItem.unlocked {
    border-color: var(--green);
    box-shadow: 0 0 15px rgba(125,255,180,.2);
  }
  
  #ww .zoneIconItem.unlocked:hover {
    box-shadow: 0 0 20px rgba(125,255,180,.4);
  }
  
  #ww .zoneIconItem.locked {
    opacity: .6;
    filter: grayscale(60%);
  }
  
  #ww .zoneIconItem .zoneIconSmall {
    width: 48px;
    height: 48px;
    border-radius: 10px;
    border: 2px solid var(--golden-border);
    overflow: hidden;
    flex-shrink: 0;
  }
  
  #ww .zoneIconItem .zoneIconSmall img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  
  #ww .zoneIconItem .zoneIconInfo {
    flex: 1;
    min-width: 0;
  }
  
  #ww .zoneIconItem .zoneIconName {
    font-size: 14px;
    font-weight: 900;
    color: var(--gold);
    margin-bottom: 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  #ww .zoneIconItem .zoneIconStatus {
    font-size: 11px;
    font-weight: 700;
    opacity: .8;
  }
  
  #ww .zoneIconItem.unlocked .zoneIconStatus {
    color: var(--green);
  }
  
  #ww .zoneIconItem.locked .zoneIconStatus {
    color: rgba(255,107,138,.9);
  }

  /* Quest Zones Section */
  #ww .questZonesSection {
    margin-top: 24px;
    border: 2px solid var(--golden-border);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 18px;
    padding: 20px;
    box-shadow: var(--shadow), 0 0 15px rgba(255,211,110,.2);
  }
  #ww .questZonesHeader h2 {
    margin: 0 0 6px 0;
    font-size: 20px;
    font-weight: 900;
    color: var(--gold);
    font-family: var(--fantasy-font);
  }
  #ww .questZonesGrid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 16px;
    margin-top: 16px;
  }
  #ww .questZoneCard {
    border: 3px solid var(--golden-border);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 18px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 190px;
    position: relative;
    overflow: hidden;
    transition: all .3s ease;
    cursor: pointer;
  }
  #ww .questZoneLockOverlay {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: rgba(10, 10, 20, 0.6);
    border-radius: 18px;
    opacity: 0;
    transition: opacity .2s ease;
    pointer-events: none;
  }
  #ww .questZoneLockOverlay .lockIcon {
    font-size: 26px;
  }
  #ww .questZoneLockOverlay .questZoneLockText {
    font-size: 12px;
    font-weight: 800;
    color: var(--text);
  }
  #ww .questZoneCard.locked .questZoneLockOverlay {
    opacity: 1;
  }
  #ww .questZoneCard:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow), 0 0 25px rgba(255,211,110,.4);
  }
  #ww .questZoneCard.locked {
    opacity: .6;
    filter: grayscale(80%);
  }
  #ww .questZoneCard.unlocked {
    border-color: var(--green);
    box-shadow: 0 0 20px rgba(125,255,180,.3), 0 4px 12px rgba(0,0,0,.3);
  }
  #ww .questZoneMedia {
    display: flex;
    gap: 12px;
    align-items: center;
  }
  #ww .questZoneImage {
    width: 64px;
    height: 64px;
    border-radius: 14px;
    border: 2px solid var(--golden-border);
    overflow: hidden;
    flex-shrink: 0;
    box-shadow: 0 4px 10px rgba(0,0,0,.45);
  }
  #ww .questZoneImage img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  #ww .questZoneName {
    font-size: 18px;
    font-weight: 900;
    color: var(--gold);
    font-family: var(--fantasy-font);
  }
  #ww .questZoneStatus {
    font-size: 12px;
    font-weight: 800;
    padding: 4px 10px;
    border-radius: 999px;
    display: inline-block;
    margin-top: 6px;
  }
  #ww .questZoneStatus.unlocked {
    background: rgba(125,255,180,.15);
    border: 2px solid var(--green);
    color: var(--green);
  }
  #ww .questZoneStatus.locked {
    background: rgba(255,107,138,.15);
    border: 2px solid rgba(255,107,138,.4);
    color: rgba(255,107,138,.9);
  }
  #ww .questZoneEnemyCount {
    font-size: 12px;
    color: var(--muted);
    margin-top: auto;
  }

  /* Quest Lore Overlay */
  #ww .questLoreOverlay {
    position: fixed;
    inset: 0;
    background: rgba(5,10,25,.7);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999;
    padding: 20px;
  }
  #ww .questLoreOverlay.show {
    display: flex;
  }
  #ww .questLoreCard {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 22px;
    border: 3px solid var(--golden-border);
    box-shadow: var(--shadow), 0 0 30px rgba(255,211,110,.3);
    padding: 24px;
    width: min(960px, 94vw);
    max-height: 90vh;
    overflow: auto;
  }
  #ww .questLoreHeader {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }
  #ww .questLoreTitleGroup {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }
  #ww .questLoreHeader h3 {
    margin: 0;
    font-size: 24px;
    font-weight: 900;
    color: var(--gold);
    font-family: var(--fantasy-font);
  }
  #ww .questLoreStatus {
    font-size: 12px;
    font-weight: 800;
    padding: 4px 10px;
    border-radius: 999px;
    display: inline-block;
  }
  #ww .questLoreStatus.unlocked {
    background: rgba(125,255,180,.15);
    border: 2px solid var(--green);
    color: var(--green);
  }
  #ww .questLoreStatus.locked {
    background: rgba(255,107,138,.15);
    border: 2px solid rgba(255,107,138,.4);
    color: rgba(255,107,138,.9);
  }
  #ww .questLoreClose {
    border: none;
    background: rgba(0,0,0,.4);
    color: var(--text);
    width: 34px;
    height: 34px;
    border-radius: 50%;
    font-size: 16px;
    cursor: pointer;
  }
  #ww .questLoreBody {
    display: grid;
    grid-template-columns: 1.1fr 1fr;
    gap: 20px;
    margin-top: 18px;
  }
  #ww .questLoreStory {
    font-size: 14px;
    line-height: 1.6;
    color: var(--text);
  }
  #ww .questLoreEnemiesTitle {
    font-size: 14px;
    font-weight: 900;
    color: var(--gold);
    margin-bottom: 10px;
  }
  #ww .questLoreEnemy {
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,.1);
    background: rgba(0,0,0,.25);
    padding: 10px 12px;
    margin-bottom: 10px;
  }
  #ww .questLoreEnemyName {
    font-weight: 900;
    color: var(--gold);
  }
  #ww .questLoreEnemyBehavior {
    font-size: 12px;
    color: var(--muted);
    margin-top: 4px;
  }
  #ww .questLoreMoves {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 8px;
  }
  #ww .questLoreMove {
    font-size: 11px;
    font-weight: 700;
    padding: 4px 8px;
    border-radius: 999px;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.2);
  }
  #ww .questLoreFooter {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-top: 20px;
    flex-wrap: wrap;
  }
  #ww .questLoreLock {
    font-size: 12px;
    color: rgba(255,107,138,.9);
    font-weight: 800;
  }
  #ww .questLoreCta {
    border: none;
    padding: 10px 16px;
    border-radius: 999px;
    background: linear-gradient(135deg, #facc15, #f97316);
    color: #0b132b;
    font-weight: 900;
    cursor: pointer;
  }
  #ww .questLoreCta:disabled {
    cursor: not-allowed;
    opacity: .6;
    background: rgba(120,120,120,.6);
    color: rgba(255,255,255,.7);
  }
  @media (max-width: 900px) {
    #ww .questLoreBody {
      grid-template-columns: 1fr;
    }
  }
  
  #ww .currentQuestHeader {
    border: 2px solid var(--golden-border);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 18px;
    padding: 16px;
    box-shadow: var(--shadow), 0 0 15px rgba(255,211,110,.2);
  }
  
  #ww .currentQuestHeader h2 {
    margin: 0 0 8px 0;
    font-size: 18px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  /* Streak Fire Icon Enhancement */
  .streakFire {
    display: inline-block;
    animation: pulse 1.5s ease-in-out infinite;
  }
  .streakFire.mega {
    font-size: 28px;
    filter: drop-shadow(0 0 10px rgba(255,140,70,.8));
  }
  
  /* Main Content + Sidebar Layout */
  /* Main Content + Sidebar Layout - Desktop optimized */
  #ww .contentWithSidebar {
    display: block;
    margin-top: 20px;
  }
  
  #ww .mainContent {
    flex: 1;
    min-width: 0;
  }
  
  /* Desktop-optimized: quest cards in horizontal grid */
  #ww .questSidebar {
    width: 100%;
    position: relative;
    top: 0;
    display: block;
  }
  
  /* Current Quest Header */
  #ww .currentQuestHeader {
    margin-bottom: 20px;
  }
  
  /* Quest Map Sidebar - Desktop: compact horizontal layout */
  #ww .questMapSidebar {
    margin-bottom: 24px;
  }
  
  /* Quest Grid - Horizontal on Desktop */
  #ww .questGrid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }
  
  /* Tablet: 2 column layout */
  @media (max-width: 1400px) {
    #ww .questGrid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  /* Mobile: single column, vertical stacking */
  @media (max-width: 900px) {
    #ww .contentWithSidebar {
      flex-direction: column;
    }
    #ww .questGrid {
      grid-template-columns: 1fr;
    }
  }
  
  #ww .questCard{
    border:4px solid var(--gold); 
    background: var(--glass-bg); 
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius:24px; 
    box-shadow:var(--shadow), 0 0 30px rgba(255,211,110,.5), inset 0 2px 0 rgba(255,255,255,.1); 
    padding:24px; 
    position:relative;
    overflow:hidden; 
    min-height:400px; 
    display:flex; 
    flex-direction:column;
    transition: all .3s ease;
  }
  #ww .questCard:hover {
    transform: translateY(-4px);
    box-shadow:var(--shadow), 0 0 40px rgba(255,211,110,.7), inset 0 2px 0 rgba(255,255,255,.2);
    border-color: rgba(255,211,110,1);
  }
  #ww .questCard::before{
    content:""; position:absolute; top:0; left:0; right:0; bottom:0; 
    background-size:cover; background-position:center; opacity:.2; z-index:0;
  }
  #ww .questCard::after {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255,255,255,.03), transparent);
    transform: rotate(45deg);
    animation: shimmer 3s linear infinite;
  }
  #ww .questCard > *{position:relative; z-index:1}
  
  #ww .questCard.night,
  #ww .questCard.morning,
  #ww .questCard.backpack{
    background: var(--glass-bg);
    border-color: var(--gold);
  }
  
  #ww .questIcon{
    width:70px; height:70px; border-radius:50%; border:4px solid var(--gold);
    background: linear-gradient(135deg, rgba(0,0,0,.6), rgba(0,0,0,.4)); 
    display:flex; align-items:center; justify-content:center;
    font-size:36px; margin-bottom:14px; 
    box-shadow:0 6px 16px rgba(0,0,0,.6), inset 0 2px 0 rgba(255,255,255,.2);
    animation: bounce 2s ease-in-out infinite;
  }
  
  #ww .questCard h3{
    margin:0 0 12px; font-size:26px; font-weight:900; color:var(--gold);
    font-family: var(--fantasy-font);
    text-shadow: 
      3px 3px 0 rgba(0,0,0,.9), 
      -1px -1px 0 rgba(0,0,0,.9),
      0 0 15px rgba(240,168,48,.6);
    letter-spacing: 1px;
  }
  
  #ww .questChecklist{margin:16px 0; flex:1}
  #ww .questChecklist .checkItem{
    display:flex; align-items:center; gap:12px; padding:10px 12px; 
    font-weight:700; font-size:15px;
    background: rgba(0,0,0,.25);
    border-radius: 12px;
    margin-bottom: 10px;
    border: 2px solid rgba(255,255,255,.1);
    transition: all .3s ease;
    cursor: pointer;
    text-shadow: 1px 1px 2px rgba(0,0,0,.7);
  }
  #ww .questChecklist .checkItem:hover{
    background: rgba(0,0,0,.3);
    border-color: rgba(255,255,255,.2);
    transform: translateX(4px);
  }
  #ww .questChecklist .checkItem input[type="checkbox"]{
    width:24px; height:24px; 
    cursor:pointer;
    accent-color: var(--green);
    flex-shrink: 0;
  }
  #ww .questChecklist .checkItem.completed {
    opacity: .7;
    text-decoration: line-through;
  }
  #ww .questChecklist .checkItem .xpTag {
    margin-left: auto;
    background: rgba(255,211,110,.25);
    border: 2px solid var(--gold);
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 900;
    color: var(--gold);
  }
  
  /* Quest Progress Bar */
  #ww .questProgress {
    margin: 16px 0;
    padding: 12px;
    background: rgba(0,0,0,.25);
    border-radius: 12px;
    border: 2px solid rgba(255,255,255,.1);
  }
  #ww .questProgress .label {
    font-size: 13px;
    font-weight: 800;
    margin-bottom: 8px;
    color: var(--muted);
  }
  #ww .questProgress .bar {
    height: 12px;
  }
  
  #ww .questNote{
    background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur);
    border:2px solid rgba(255,107,138,.5);
    border-radius:12px; padding:10px; margin:12px 0; font-weight:900; font-size:13px;
    color:var(--ink); text-shadow: 1px 1px 2px rgba(0,0,0,.7);
  }
  
  #ww .questFooter{display:flex; justify-content:space-between; align-items:center; margin-top:12px}
  #ww .xpBadge{
    background: rgba(255,211,110,.25); border:2px solid var(--gold);
    border-radius:999px; padding:6px 14px; font-weight:1000; font-size:14px;
    color:var(--gold);
  }
  
  #ww .questBtn{
    padding:14px 28px; border-radius:14px; border:none; font-weight:950; font-size:15px;
    cursor:pointer; color:#fff; 
    transition: all .3s ease;
    box-shadow: 0 6px 12px rgba(0,0,0,.4), inset 0 2px 0 rgba(255,255,255,.2);
    position: relative;
    overflow: hidden;
  }
  #ww .questBtn::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255,255,255,.3);
    transform: translate(-50%, -50%);
    transition: width .6s, height .6s;
  }
  #ww .questBtn:hover::before {
    width: 300px;
    height: 300px;
  }
  #ww .questBtn:hover{
    transform:translateY(-3px); 
    box-shadow:0 8px 20px rgba(0,0,0,.5), inset 0 2px 0 rgba(255,255,255,.3);
  }
  #ww .questBtn:active{
    transform:translateY(-1px);
    box-shadow:0 4px 8px rgba(0,0,0,.4);
  }
  #ww .questBtn.red{background: linear-gradient(135deg, #dc2626, #991b1b)}
  #ww .questBtn.green{background: linear-gradient(135deg, #10b981, #059669)}
  #ww .questBtn.blue{background: linear-gradient(135deg, #3b82f6, #1d4ed8)}
  #ww .questBtn.completed{
    background: linear-gradient(135deg, #6b7280, #4b5563);
    cursor: default;
  }
  
  /* Bottom Dashboard */
  #ww .dashboard{margin-top:24px; display:grid; grid-template-columns:1fr 1fr 1fr; gap:20px}
  @media (max-width:980px){ #ww .dashboard{grid-template-columns:1fr} }
  
  #ww .dashPanel{
    border:3px solid var(--gold); background: var(--glass-bg); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); border-radius:20px;
    box-shadow:var(--shadow), 0 0 20px rgba(255,211,110,.3); padding:20px;
  }
  
  #ww .dashPanel h3{
    margin:0 0 16px; font-size:18px; font-weight:1000; color:var(--gold);
    text-shadow: 2px 2px 0 rgba(0,0,0,.9);
  }
  
  #ww .xpDisplay{
    font-size:32px; font-weight:1000; color:var(--green); margin:12px 0;
    text-shadow: 2px 2px 0 rgba(0,0,0,.7);
  }
  
  #ww .streakInfo{
    font-size:18px; font-weight:900; margin:8px 0; color:var(--ink);
    text-shadow: 1px 1px 3px rgba(0,0,0,.7);
  }
  
  #ww .badgeGrid{display:grid; grid-template-columns:repeat(4, 1fr); gap:12px; margin-top:12px}
  @media (max-width:520px){ #ww .badgeGrid{grid-template-columns:repeat(2, 1fr)} }
  
  #ww .badgeItem{text-align:center}
  #ww .badgeIcon{
    width:80px; height:80px; border-radius:50%; border:4px solid var(--golden-border);
    background: linear-gradient(135deg, rgba(0,0,0,.6), rgba(0,0,0,.4)); 
    display:flex; align-items:center; justify-content:center;
    font-size:36px; margin:0 auto 10px; 
    box-shadow:0 6px 16px rgba(0,0,0,.5), 0 0 10px rgba(240,168,48,.2);
    transition: all .3s ease;
    position: relative;
  }
  #ww .badgeIcon.earned{
    background: linear-gradient(135deg, var(--gold), var(--orange), var(--gold)); 
    background-size: 200% 200%;
    border-color:var(--gold);
    animation: shimmer 2s linear infinite, glow 2s ease-in-out infinite;
    box-shadow:0 0 20px rgba(255,211,110,.6), 0 6px 16px rgba(0,0,0,.5);
  }
  #ww .badgeIcon.earned::after {
    content: "";
    position: absolute;
    top: -5px;
    right: -5px;
    font-size: 20px;
    animation: sparkle 1.5s ease-in-out infinite;
  }
  #ww .badgeIcon.locked{
    opacity:.3; 
    filter:grayscale(100%) brightness(.5);
    cursor: not-allowed;
  }
  #ww .badgeIcon:hover:not(.locked) {
    transform: scale(1.1) rotate(5deg);
  }
  #ww .badgeLabel{font-size:12px; font-weight:800; color:var(--muted)}
  
  #ww .weekGrid{display:grid; grid-template-columns:repeat(5, 1fr); gap:10px; margin-top:12px}
  #ww .dayBox{
    aspect-ratio:1; border:2px solid var(--golden-border); background: var(--glass-bg);
    backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur);
    border-radius:12px; display:flex; flex-direction:column; align-items:center; justify-content:center;
    font-weight:900; font-size:12px; padding:8px;
  }
  #ww .dayBox.complete{background: rgba(125,255,180,.2); border-color:var(--green)}
  #ww .dayBox.complete::after{content:""; display:block; font-size:20px; color:var(--green); margin-top:4px}
  
  #ww .treasureNote{
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur);
    border:2px solid var(--gold); border-radius:12px; padding:12px; margin-top:12px;
    font-weight:900; text-align:center; color:var(--gold);
    text-shadow: 1px 1px 3px rgba(0,0,0,.7);
  }

  /* Companion Title Display */
  #ww .companion .companionTitle {
    font-size: 12px;
    font-weight: 800;
    color: var(--gold);
    font-style: italic;
    margin-top: 2px;
    text-shadow: 1px 1px 2px rgba(0,0,0,.6);
  }

  /* War Chest Panel */
  #ww .warChestPanel {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 3px solid var(--gold);
    border-radius: 18px;
    padding: 16px;
    margin-top: 16px;
    text-align: center;
    box-shadow: 0 0 20px rgba(255,211,110,.2), 0 4px 12px rgba(0,0,0,.3);
  }
  #ww .warChestPanel h4 {
    margin: 0 0 8px;
    font-size: 20px;
    font-family: var(--fantasy-font);
    color: var(--gold);
    text-shadow: 2px 2px 0 rgba(0,0,0,.8), 0 0 15px rgba(255,211,110,.5);
  }
  #ww .warChestAmount {
    font-size: 36px;
    font-weight: 1000;
    color: var(--gold);
    text-shadow: 2px 2px 0 rgba(0,0,0,.7), 0 0 20px rgba(255,211,110,.4);
    margin: 8px 0;
    animation: pulse 2s ease-in-out infinite;
  }
  #ww .awardBtnRow {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 12px;
  }
  #ww .awardBtn {
    border: 2px solid var(--gold);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    color: var(--gold);
    padding: 10px 16px;
    border-radius: 14px;
    cursor: pointer;
    font-weight: 900;
    font-size: 13px;
    transition: all .3s ease;
    box-shadow: 0 4px 8px rgba(0,0,0,.3), inset 0 1px 0 rgba(255,255,255,.1);
  }
  #ww .awardBtn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,.4), 0 0 20px rgba(255,211,110,.5);
  }
  #ww .awardBtn:active {
    transform: translateY(0);
  }
  #ww .awardBtn:disabled {
    opacity: .4;
    cursor: not-allowed;
    transform: none;
  }

  /* Companion Reward Card Overlay */
  #companionRewardOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,.85);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn .3s ease-out;
  }
  #companionRewardOverlay.show {
    display: flex;
  }
  #companionRewardOverlay .content {
    text-align: center;
    animation: celebrate .6s ease-out;
    padding: 40px;
  }
  #companionRewardOverlay .rewardEmoji {
    font-size: 100px;
    display: block;
    margin-bottom: 16px;
    animation: bounce 1s ease-in-out infinite;
  }
  #companionRewardOverlay .rewardAvatar {
    width: 120px;
    height: 120px;
    margin: 0 auto 12px;
    border-radius: 50%;
    border: 4px solid var(--gold);
    overflow: hidden;
    box-shadow: 0 0 20px rgba(255,211,110,.5);
  }
  #companionRewardOverlay .rewardAvatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  #companionRewardOverlay .rewardHeading {
    font-size: 48px;
    font-family: var(--fantasy-font);
    color: var(--green);
    text-shadow:
      4px 4px 0 rgba(0,0,0,.9),
      0 0 30px rgba(125,255,180,.8),
      0 0 60px rgba(125,255,180,.5);
    margin: 0 0 12px;
    animation: pulse 1s ease-in-out infinite;
  }
  #companionRewardOverlay .rewardName {
    font-size: 32px;
    font-family: var(--fantasy-font);
    color: var(--gold);
    margin-bottom: 8px;
  }
  #companionRewardOverlay .rewardLevel {
    font-size: 24px;
    color: var(--ink);
    margin-bottom: 8px;
  }
  #companionRewardOverlay .rewardTitle {
    font-size: 28px;
    color: var(--gold);
    font-family: var(--fantasy-font);
    text-shadow: 2px 2px 4px rgba(0,0,0,.8);
  }
  #companionRewardOverlay .rewardStats {
    margin-top: 10px;
    font-size: 16px;
    color: var(--ink);
  }
  #companionRewardOverlay .rewardPower {
    margin-top: 16px;
    font-size: 20px;
    color: var(--green);
    font-weight: 900;
    text-shadow: 0 0 10px rgba(125,255,180,.6);
    animation: pulse 1.5s ease-in-out infinite;
  }

  /* XP Recap Overlay */
  #xpRecapOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,.75);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn .3s ease-out;
  }
  #xpRecapOverlay.show {
    display: flex;
  }
  #xpRecapOverlay .content {
    text-align: center;
    padding: 32px 40px;
    background: var(--glass-strong-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 3px solid var(--golden-border);
    border-radius: var(--r1);
    box-shadow: var(--shadow);
  }
  #xpRecapOverlay h2 {
    font-size: 40px;
    font-family: var(--fantasy-font);
    color: var(--gold);
    margin-bottom: 12px;
  }
  #xpRecapOverlay .xpRecapValue {
    font-size: 28px;
    font-weight: 900;
    color: var(--green);
  }

  /* Level-Down Overlay */
  #levelDownOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(80,0,0,.90);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn .3s ease-out;
  }
  #levelDownOverlay.show {
    display: flex;
  }
  @keyframes shakeDown {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
    20%, 40%, 60%, 80% { transform: translateX(10px); }
  }
  #levelDownOverlay .content {
    text-align: center;
    animation: shakeDown .6s ease-out;
    padding: 40px;
  }
  #levelDownOverlay .content h2 {
    font-size: 72px;
    font-family: var(--fantasy-font);
    color: var(--red);
    text-shadow:
      4px 4px 0 rgba(0,0,0,.9),
      0 0 30px rgba(220,38,38,.8),
      0 0 60px rgba(220,38,38,.5);
    margin: 0 0 20px;
    animation: pulse 1s ease-in-out infinite;
  }
  #levelDownOverlay .levelInfo {
    font-size: 28px;
    color: var(--ink);
    margin-bottom: 10px;
  }
  #levelDownOverlay .levelTitle {
    font-size: 24px;
    color: var(--gold);
    font-family: var(--fantasy-font);
  }

  /* Weather Effects System */
  #weatherContainer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10001;
    overflow: hidden;
  }

  /* Rain effect */
  @keyframes rainFall {
    0% {
      transform: translateY(-100vh) translateX(0);
    }
    100% {
      transform: translateY(100vh) translateX(20px);
    }
  }

  .raindrop {
    position: absolute;
    width: 2px;
    height: 20px;
    background: linear-gradient(to bottom, transparent, rgba(174, 194, 224, 0.8));
    animation: rainFall linear infinite;
  }

  /* Snow effect */
  @keyframes snowFall {
    0% {
      transform: translateY(-100vh) translateX(0) rotate(0deg);
      opacity: 0.8;
    }
    100% {
      transform: translateY(100vh) translateX(50px) rotate(360deg);
      opacity: 0.4;
    }
  }

  .snowflake {
    position: absolute;
    color: white;
    font-size: 20px;
    animation: snowFall linear infinite;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
  }

  /* Cloud effect */
  @keyframes cloudDrift {
    0% {
      transform: translateX(-20%);
    }
    100% {
      transform: translateX(120%);
    }
  }

  .cloud {
    position: absolute;
    opacity: 0.6;
    animation: cloudDrift linear infinite;
    font-size: 60px;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
  }

  /* Lightning effect */
  @keyframes lightning {
    0%, 10%, 20%, 100% {
      opacity: 0;
    }
    5%, 15% {
      opacity: 1;
    }
  }

  #weatherLightning {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.9);
    opacity: 0;
    pointer-events: none;
    z-index: 10001;
  }

  /* Weather toggle button */
  #weatherToggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 100;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 2px solid var(--golden-border);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 28px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3), 0 0 15px rgba(212,165,48,0.3);
    transition: all 0.3s ease;
    pointer-events: auto;
  }

  #weatherToggle:hover {
    transform: scale(1.1) rotate(10deg);
    box-shadow: 0 6px 16px rgba(0,0,0,0.4), 0 0 25px rgba(212,165,48,0.5);
  }

  #weatherToggle:active {
    transform: scale(0.95);
  }

  /* Weather menu */
  #weatherMenu {
    position: fixed;
    bottom: 90px;
    right: 20px;
    z-index: 99;
    background: var(--glass-strong-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 2px solid var(--golden-border);
    border-radius: 16px;
    padding: 12px;
    display: none;
    flex-direction: column;
    gap: 8px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4), 0 0 20px rgba(212,165,48,0.2);
    pointer-events: auto;
  }

  #weatherMenu.show {
    display: flex;
    animation: slideUp 0.3s ease-out;
  }

  .weatherOption {
    background: var(--glass-bg);
    border: 2px solid var(--golden-border);
    border-radius: 12px;
    padding: 10px 16px;
    cursor: pointer;
    font-weight: 800;
    font-size: 14px;
    color: var(--ink);
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  }

  .weatherOption:hover {
    background: rgba(255,211,110,0.2);
    border-color: var(--gold);
    transform: translateX(-4px);
  }

  .weatherOption.active {
    background: rgba(255,211,110,0.25);
    border-color: var(--gold);
    box-shadow: 0 0 10px rgba(255,211,110,0.4);
  }

  /* Audio Controls */
  #audioToggle {
    position: fixed;
    bottom: 20px;
    right: 90px;
    z-index: 100;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 2px solid var(--golden-border);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 28px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3), 0 0 15px rgba(212,165,48,0.3);
    transition: all 0.3s ease;
    pointer-events: auto;
  }

  #audioToggle:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0,0,0,0.4), 0 0 25px rgba(212,165,48,0.5);
  }

  #audioToggle:active {
    transform: scale(0.95);
  }

  #audioToggle.muted {
    opacity: 0.5;
  }

  /* Audio Settings Panel */
  #audioSettings {
    position: fixed;
    bottom: 90px;
    right: 90px;
    z-index: 99;
    background: var(--glass-strong-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 2px solid var(--golden-border);
    border-radius: 16px;
    padding: 16px;
    display: none;
    flex-direction: column;
    gap: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4), 0 0 20px rgba(212,165,48,0.2);
    pointer-events: auto;
    min-width: 220px;
  }

  #audioSettings.show {
    display: flex;
    animation: slideUp 0.3s ease-out;
  }

  #audioSettings h3 {
    margin: 0 0 8px 0;
    font-size: 16px;
    color: var(--gold);
    font-family: var(--fantasy-font);
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  }

  .audioControl {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .audioControl label {
    font-size: 12px;
    font-weight: 700;
    color: var(--ink);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .audioControl input[type="range"] {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: var(--glass-bg);
    border: 1px solid var(--golden-border);
    outline: none;
    -webkit-appearance: none;
  }

  .audioControl input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--gold);
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }

  .audioControl input[type="range"]::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--gold);
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }

  .audioCheckbox {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    background: var(--glass-bg);
    border: 1px solid var(--golden-border);
    border-radius: 8px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 700;
    color: var(--ink);
    transition: all 0.2s ease;
  }

  .audioCheckbox:hover {
    background: rgba(255,211,110,0.15);
    border-color: var(--gold);
  }

  .audioCheckbox input[type="checkbox"] {
    cursor: pointer;
  }

  /* Mobile responsiveness for audio controls */
  @media (max-width: 600px) {
    #audioToggle {
      bottom: 90px;
      right: 20px;
      width: 50px;
      height: 50px;
      font-size: 24px;
    }

    #audioSettings {
      bottom: 150px;
      right: 20px;
      min-width: 180px;
    }
  }
  
  /* ============================================
     MORNING MISSION STYLES
     ============================================ */
  
  /* Mission Timer */
  .missionTimer {
    background: linear-gradient(135deg, var(--glass-strong-bg), rgba(30,20,50,0.4));
    backdrop-filter: var(--glass-blur);
    border: 2px solid var(--golden-border);
    border-radius: var(--r2);
    padding: 12px 16px;
    margin: 12px 0;
    text-align: center;
    font-family: var(--fantasy-font);
    animation: glow 2s ease-in-out infinite;
  }
  
  .missionTimer.locked {
    background: linear-gradient(135deg, rgba(60,60,60,0.3), rgba(40,40,40,0.3));
    border-color: #666;
    animation: none;
  }
  
  .missionTimer.active {
    background: linear-gradient(135deg, rgba(20,120,20,0.3), rgba(10,80,10,0.3));
    border-color: var(--green);
  }
  
  .missionTimer.active.warning {
    background: linear-gradient(135deg, rgba(200,140,20,0.3), rgba(150,100,10,0.3));
    border-color: var(--gold);
    animation: pulse 1s ease-in-out infinite;
  }
  
  .missionTimer.active.critical {
    background: linear-gradient(135deg, rgba(200,20,20,0.3), rgba(150,10,10,0.3));
    border-color: var(--red);
    animation: pulse 0.5s ease-in-out infinite;
  }
  
  .missionTimer strong {
    font-size: 1.4em;
    color: var(--gold);
  }
  
  .missionTimer .deadline {
    font-size: 0.85em;
    opacity: 0.8;
    display: block;
    margin-top: 4px;
  }
  
  /* Mission Status Banner */
  .missionStatusBanner {
    background: linear-gradient(135deg, var(--glass-strong-bg), rgba(30,20,50,0.4));
    backdrop-filter: var(--glass-blur);
    border: 2px solid;
    border-radius: var(--r2);
    padding: 12px 16px;
    margin: 12px 0;
    text-align: center;
    font-family: var(--fantasy-font);
    font-size: 1.1em;
  }
  
  .missionStatusBanner.success {
    background: linear-gradient(135deg, rgba(20,150,20,0.4), rgba(10,100,10,0.4));
    border-color: var(--green);
    animation: celebrate 0.6s ease-out;
  }
  
  .missionStatusBanner.failed {
    background: linear-gradient(135deg, rgba(150,20,20,0.4), rgba(100,10,10,0.4));
    border-color: var(--red);
  }
  
  .missionStatusBanner .small {
    font-size: 0.85em;
    opacity: 0.9;
    margin-top: 4px;
    display: block;
  }
  
  /* Bomb Visual */
  .bombVisual {
    background: linear-gradient(135deg, rgba(40,30,60,0.5), rgba(30,20,50,0.5));
    backdrop-filter: var(--glass-blur);
    border: 2px solid rgba(200,148,42,0.3);
    border-radius: var(--r2);
    padding: 16px;
    margin: 12px 0;
    text-align: center;
  }
  
  .bombProgress {
    font-family: var(--fantasy-font);
    font-size: 1.1em;
    margin-bottom: 12px;
    color: var(--gold);
  }
  
  .bombEmoji {
    font-size: 3em;
    margin: 8px 0;
    animation: pulse 2s ease-in-out infinite;
  }
  
  .bombVisual.disarmed .bombEmoji {
    animation: none;
  }
  
  .bombVisual.exploded .bombEmoji {
    animation: william-shake 0.3s ease-in-out 3;
  }
  
  .bombDisarmed,
  .bombExploded {
    font-size: 1.5em;
    font-family: var(--fantasy-font);
    margin: 12px 0;
  }
  
  .bombDisarmed {
    color: var(--green);
    animation: celebrate 0.6s ease-out;
  }
  
  .bombExploded {
    color: var(--red);
    animation: william-shake 0.3s ease-in-out;
  }
  
  /* Wires Container */
  .wiresContainer {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-top: 12px;
  }
  
  .wire {
    width: 60px;
    height: 8px;
    border-radius: 4px;
    position: relative;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  
  .wire::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(255,255,255,0.3), transparent);
    border-radius: 4px;
  }
  
  .wire.cut {
    height: 4px;
    opacity: 0.3;
    transform: scaleX(0.5);
    box-shadow: none;
  }
  
  /* Wire Badges on Tasks */
  .wireBadge {
    display: inline-block;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    text-align: center;
    line-height: 24px;
    margin-right: 8px;
    font-size: 0.9em;
    border: 2px solid rgba(255,255,255,0.3);
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  
  .wireBadge.cut {
    opacity: 0.4;
    border-style: dashed;
    position: relative;
  }
  
  .wireBadge.cut::after {
    content: '';
    position: absolute;
    top: -8px;
    right: -8px;
    font-size: 0.7em;
  }
  
  /* Mission Overlays */
  .missionOverlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.85);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .missionOverlay.show {
    opacity: 1;
  }
  
  .missionOverlayContent {
    background: linear-gradient(135deg, var(--panel), rgba(40,30,60,0.95));
    border: 3px solid var(--golden-border);
    border-radius: var(--r1);
    padding: 40px;
    max-width: 500px;
    text-align: center;
    position: relative;
    animation: celebrate 0.6s ease-out;
  }
  
  .missionOverlay.failed .missionOverlayContent {
    border-color: var(--red);
    animation: william-shake 0.4s ease-in-out;
  }
  
  .williamHero,
  .williamSooty {
    font-size: 5em;
    margin-bottom: 20px;
    animation: william-bounce-rotate 0.8s ease-out;
  }
  
  .missionOverlay h2 {
    font-family: var(--fantasy-font);
    font-size: 2.2em;
    margin: 0 0 20px;
    color: var(--gold);
  }
  
  .missionOverlay.failed h2 {
    color: var(--red);
  }
  
  .missionStats {
    font-size: 1.1em;
    line-height: 1.8;
  }
  
  .missionStats > div {
    margin: 8px 0;
  }
  
  /* Confetti Animation */
  .confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    animation: confettiFall 3s ease-out forwards;
  }
  
  @keyframes confettiFall {
    0% {
      top: -20px;
      opacity: 1;
      transform: translateY(0) rotate(0deg);
    }
    100% {
      top: 100%;
      opacity: 0;
      transform: translateY(100px) rotate(720deg);
    }
  }
  
  /* Smoke Animation */
  .smoke {
    position: absolute;
    font-size: 2em;
    animation: smokeFly 2s ease-out forwards;
    opacity: 0.8;
  }
  
  @keyframes smokeFly {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0.8;
    }
    100% {
      transform: translateY(-100px) scale(2);
      opacity: 0;
    }
  }
</style>

<!-- Weather Effects Container -->
<div id="weatherContainer"></div>
<div id="weatherLightning"></div>

<!-- Weather Toggle Button -->
<div id="weatherToggle" title="Weather Effects"></div>

<!-- Weather Menu -->
<div id="weatherMenu">
  <div class="weatherOption" data-weather="none">
    <span></span> Clear
  </div>
  <div class="weatherOption" data-weather="rain">
    <span></span> Rain
  </div>
  <div class="weatherOption" data-weather="snow">
    <span></span> Snow
  </div>
  <div class="weatherOption" data-weather="clouds">
    <span></span> Cloudy
  </div>
  <div class="weatherOption" data-weather="storm">
    <span></span> Storm
  </div>
</div>

<!-- Audio Toggle Button -->
<div id="audioToggle" title="Enable Sound / Audio Settings"></div>

<!-- Audio Settings Panel -->
<div id="audioSettings">
  <h3> Audio Settings</h3>
  
  <div class="audioControl">
    <label>
      <span> Music</span>
      <span id="musicVolumeValue">20%</span>
    </label>
    <input type="range" id="musicVolume" min="0" max="100" value="20">
  </div>
  
  <div class="audioControl">
    <label>
      <span> Ambience</span>
      <span id="ambienceVolumeValue">30%</span>
    </label>
    <input type="range" id="ambienceVolume" min="0" max="100" value="30">
  </div>
  
  <div class="audioControl">
    <label>
      <span> Sound FX</span>
      <span id="sfxVolumeValue">70%</span>
    </label>
    <input type="range" id="sfxVolume" min="0" max="100" value="70">
  </div>
  
  <div class="audioCheckbox">
    <input type="checkbox" id="reduceSoundMode">
    <label for="reduceSoundMode" style="cursor: pointer; margin: 0;">Reduce Sound Mode</label>
  </div>
</div>


<div id="ww">
  <div class="wrap">
    <div class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="logoMark"><img id="logoImg" alt="William's World"></div>
          <div>
            <div>William's World</div>
            <div class="small">Quest UI  daily wins  XP  levels  streak rewards</div>
          </div>
          <span class="badge" id="todayLabel">Today</span>
        </div>
        <div class="nav">
          <button class="active" data-section="home">Home</button>
          <button data-section="tracker">Tracker</button>
          <button data-section="party">Party</button>
          <button data-section="map">Map</button>
          <button onclick="window.location.href='games/index.html'"> Games</button>
          <button onclick="window.location.href='battle-system-demo.html'"> Battle System</button>
        </div>
      </div>
    </div>

    <section class="banner" data-banner id="home">
      <div class="banner-inner">
        <div class="william-avatar" id="williamAvatar">
          <img id="williamImg" alt="William character avatar" />
        </div>
        <div>
          <h1>Welcome to William's World!</h1>
          <div class="levelTitle" id="levelTitle">Apprentice Adventurer</div>
          <div class="levelClass" id="williamClassTitle"></div>
          <p>Complete daily quests to earn XP, level up, and unlock amazing rewards. Your adventure begins now!</p>

          <div class="statRow">
            <div class="pill"><span class="dot"></span> Level <span id="levelNum">1</span></div>
            <div class="pill hpPill"><span class="dot"></span> HP <span id="hpNum">100</span>/<span id="hpMaxPill">100</span></div>
            <div class="pill"><span class="dot green"></span> Streak <span id="streakNum">0</span> days</div>
            <div class="pill"><span class="dot gold"></span> Today: <span id="dayResult">Not graded</span></div>
          </div>

          <div class="meter">
            <div class="meterTop">
              <div><b>XP</b>: <span id="xpNow">0</span> / <span id="xpNext">400</span></div>
              <div class="small">Complete all quests to earn rewards!</div>
            </div>
            <div class="bar"><div id="xpBar"></div></div>
          </div>
          <div class="meter hpMeter" id="hpMeterBanner">
            <div class="meterTop">
              <div><b> HP</b>: <span id="hpNow">100</span> / <span id="hpMax">100</span></div>
              <div class="small">Missed tasks deal damage at midnight!</div>
            </div>
            <div class="bar"><div id="hpBar"></div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content with Sidebar Layout -->
    <div class="contentWithSidebar">
      <!-- Sidebar with Quest Tracker and Quest Zones -->
      <aside class="questSidebar">
        <!-- Quest Cards in Sidebar -->
        <div class="questGrid" id="tracker">
      <!-- Quest 1: Win Tomorrow Tonight -->
      <div class="questCard night" id="questNight">
        <div class="questIcon"></div>
        <h3>Win Tomorrow Tonight</h3>
        <div class="questChecklist">
          <label class="checkItem" data-task="n_trapper">
            <input type="checkbox">
            <span>Trapper Ready</span>
            <span class="xpTag">+15 XP</span>
          </label>
          <label class="checkItem" data-task="n_clothes">
            <input type="checkbox">
            <span>Clothes Ready</span>
            <span class="xpTag">+15 XP</span>
          </label>
          <label class="checkItem" data-task="n_lunch">
            <input type="checkbox">
            <span>Lunch Plan Ready</span>
            <span class="xpTag">+10 XP</span>
          </label>
          <label class="checkItem" data-task="n_shoes">
            <input type="checkbox">
            <span>Shoes + Jacket Ready</span>
            <span class="xpTag">+10 XP</span>
          </label>
        </div>
        <div class="questProgress">
          <div class="label"><span class="progressText">0/4 tasks</span></div>
          <div class="bar"><div class="progressBar"></div></div>
        </div>
        <div class="questNote">No Screen Time Until Done!</div>
        <div class="questFooter">
          <div class="xpBadge">Total: +50 XP</div>
        </div>
      </div>

      <!-- Quest 2: Ready for School! -->
      <div class="questCard morning" id="questMorning">
        <div class="questIcon"></div>
        <h3>Ready for School!</h3>
        <div class="questChecklist">
          <label class="checkItem" data-task="m_prayer">
            <input type="checkbox">
            <span>Prayer & Breakfast</span>
            <span class="xpTag">+15 XP</span>
          </label>
          <label class="checkItem" data-task="m_dressed">
            <input type="checkbox">
            <span>Get Dressed</span>
            <span class="xpTag">+10 XP</span>
          </label>
          <label class="checkItem" data-task="m_teeth">
            <input type="checkbox">
            <span>Brush Teeth & Hair</span>
            <span class="xpTag">+15 XP</span>
          </label>
          <label class="checkItem" data-task="m_trappercheck">
            <input type="checkbox">
            <span>Backpack Check</span>
            <span class="xpTag">+10 XP</span>
          </label>
        </div>
        <div class="questProgress">
          <div class="label"><span class="progressText">0/4 tasks</span></div>
          <div class="bar"><div class="progressBar"></div></div>
        </div>
        <div class="questFooter">
          <div class="xpBadge">Total: +50 XP</div>
        </div>
      </div>

      <!-- Quest 3: Trapper Ready Mission! -->
      <div class="questCard backpack" id="questBackpack">
        <div class="questIcon"></div>
        <h3>Trapper Ready Mission!</h3>
        <div class="questChecklist">
          <label class="checkItem" data-task="t_work">
            <input type="checkbox">
            <span>Work & Papers</span>
            <span class="xpTag">+15 XP</span>
          </label>
          <label class="checkItem" data-task="t_notebooks">
            <input type="checkbox">
            <span>Notebooks Inside</span>
            <span class="xpTag">+10 XP</span>
          </label>
          <label class="checkItem" data-task="t_supplies">
            <input type="checkbox">
            <span>Supplies Packed</span>
            <span class="xpTag">+15 XP</span>
          </label>
          <label class="checkItem" data-task="t_check">
            <input type="checkbox">
            <span>Final Check</span>
            <span class="xpTag">+10 XP</span>
          </label>
        </div>
        <div class="questProgress">
          <div class="label"><span class="progressText">0/4 tasks</span></div>
          <div class="bar"><div class="progressBar"></div></div>
        </div>
        <div class="questFooter">
          <div class="xpBadge">Total: +50 XP</div>
        </div>
      </div>
      </div>

      <section class="questZonesSection" id="questZones">
        <div class="questZonesHeader">
          <h2> Quest Zones</h2>
          <div class="small" style="margin-top:8px;">Unlock zones with streaks. Hover, tap, or use Tab + Enter to view details.</div>
        </div>
        <div class="questZonesGrid" id="questZonesGrid"></div>
      </section>
    </aside>

    <!-- Main Content Area -->
    <div class="mainContent">
      <!-- Bottom Dashboard -->
    <div class="dashboard">
      <!-- XP & Streaks Panel -->
      <div class="dashPanel">
        <h3>XP & Streaks</h3>
        <div class="xpDisplay" id="dashXP">0</div>
        <div class="streakInfo"><span class="streakFire"></span> <span id="dashStreak">0</span> Days Streak</div>
        <div class="small" style="margin-top:8px;"> HP: <span id="dashHP">100</span>/<span id="dashHPMax">100</span></div>
        <div class="meter hpMeter" style="margin-top:6px;" id="hpMeterDash">
          <div class="bar"><div id="dashHPBar"></div></div>
        </div>
        <div class="small" style="margin-top:8px;">Next Badge: <span id="nextBadge">Bronze Shield</span></div>
        <div class="meter" style="margin-top:12px;">
          <div class="meterTop">
            <div class="small">Progress to Next Level</div>
          </div>
          <div class="bar"><div id="dashXPBar"></div></div>
        </div>
      </div>

      <!-- Streak Milestone Badges -->
      <div class="dashPanel">
        <h3>Streak Milestones</h3>
        <div class="badgeGrid">
          <div class="badgeItem">
            <div class="badgeIcon locked" id="streakBadge3"></div>
            <div class="badgeLabel">Bronze Shield<br>(3 days)</div>
          </div>
          <div class="badgeItem">
            <div class="badgeIcon locked" id="streakBadge5"></div>
            <div class="badgeLabel">Silver Sword<br>(5 days)</div>
          </div>
          <div class="badgeItem">
            <div class="badgeIcon locked" id="streakBadge7"></div>
            <div class="badgeLabel">Gold Crown<br>(7 days)</div>
          </div>
          <div class="badgeItem">
            <div class="badgeIcon locked" id="streakBadge10"></div>
            <div class="badgeLabel">Diamond Dragon<br>(10 days)</div>
          </div>
        </div>
      </div>

      <!-- Task Badges -->
      <div class="dashPanel">
        <h3>Task Badges</h3>
        <div class="badgeGrid">
          <div class="badgeItem">
            <div class="badgeIcon locked" id="badge1"></div>
            <div class="badgeLabel">Trapper Master</div>
          </div>
          <div class="badgeItem">
            <div class="badgeIcon locked" id="badge2"></div>
            <div class="badgeLabel">Perfect Day</div>
          </div>
          <div class="badgeItem">
            <div class="badgeIcon locked" id="badge3"></div>
            <div class="badgeLabel">Streak Star</div>
          </div>
          <div class="badgeItem">
            <div class="badgeIcon locked" id="badge4"></div>
            <div class="badgeLabel">No Missing Items</div>
          </div>
        </div>
      </div>
    </div>
    </div> <!-- end mainContent -->
    </div> <!-- end contentWithSidebar -->

    <!-- Companion Party Section -->
    <div id="party" style="margin-top:24px;">
      <div class="dashPanel">
        <h3> Companion Party</h3>
        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-top:16px;">
          <div class="companion" id="companionEmber">
            <div class="header">
              <div class="avatar">
                <img id="emberImg" alt="Companion portrait">
              </div>
              <div class="info">
                <div class="name" id="emberName"></div>
                <div class="type" id="emberClass"></div>
                <div class="level">Lvl <span class="companionLevel">1</span></div>
                <div class="companionTitle" id="emberTitle"></div>
              </div>
            </div>
            <div class="statBar">
              <div class="statLabel">XP Progress</div>
              <div class="bar"><div class="companionXPBar"></div></div>
            </div>
          </div>
          
          <div class="companion" id="companionSprite">
            <div class="header">
              <div class="avatar">
                <img id="spriteImg" alt="Companion portrait">
              </div>
              <div class="info">
                <div class="name" id="spriteName"></div>
                <div class="type" id="spriteClass"></div>
                <div class="level">Lvl <span class="companionLevel">1</span></div>
                <div class="companionTitle" id="spriteTitle"></div>
              </div>
            </div>
            <div class="statBar">
              <div class="statLabel">XP Progress</div>
              <div class="bar"><div class="companionXPBar"></div></div>
            </div>
          </div>
          
          <div class="companion" id="companionGolem">
            <div class="header">
              <div class="avatar">
                <img id="golemImg" alt="Companion portrait">
              </div>
              <div class="info">
                <div class="name" id="golemName"></div>
                <div class="type" id="golemClass"></div>
                <div class="level">Lvl <span class="companionLevel">1</span></div>
                <div class="companionTitle" id="golemTitle"></div>
              </div>
            </div>
            <div class="statBar">
              <div class="statLabel">XP Progress</div>
              <div class="bar"><div class="companionXPBar"></div></div>
            </div>
          </div>
        </div>
        <div class="warChestPanel" id="warChestPanel">
          <h4> War Chest </h4>
          <div class="warChestAmount"><span id="warChestGold">0</span> </div>
          <div class="small" style="color:var(--muted);">Award 50 gold to a companion!</div>
          <div class="awardBtnRow">
            <button class="awardBtn" data-award="ember"> Award <span class="awardName" data-companion="ember"></span></button>
            <button class="awardBtn" data-award="sprite"> Award <span class="awardName" data-companion="sprite"></span></button>
            <button class="awardBtn" data-award="golem"> Award <span class="awardName" data-companion="golem"></span></button>
          </div>
        </div>
      </div>
    </div>

    <!-- World Map Section -->
    <div id="map" style="margin-top:24px;"></div>

    <!-- Weekly Tracker -->
    <div style="margin-top:24px;">
      <div class="dashPanel">
        <h3> Weekly Tracker Reward </h3>
        <div class="treasureNote">5 Organized Days = PRIZE!</div>
        <div class="weekGrid" id="weekGrid">
          <div class="dayBox" data-day="mon"><div>Mon</div></div>
          <div class="dayBox" data-day="tue"><div>Tue</div></div>
          <div class="dayBox" data-day="wed"><div>Wed</div></div>
          <div class="dayBox" data-day="thu"><div>Thu</div></div>
          <div class="dayBox" data-day="fri"><div>Fri</div></div>
        </div>
      </div>
    </div>

    <!-- Hidden detailed task list for backward compatibility -->
    <div style="display:none;">
      <section class="card">
        <h2>Daily Checklist <span class="tag">XP + Streak</span></h2>
        <div class="frame"><div class="small"><b>PASS rule:</b> all Night-Before tasks + Trapper Check complete.</div></div>
        <div class="taskList" id="taskList"></div>
      </section>
    </div>
  </div>

  <div class="toast" id="toast"></div>
  
  <!-- Level Up Celebration Overlay -->
  <div id="levelUpOverlay">
    <div class="content">
      <div class="william-avatar-overlay" id="williamAvatarOverlay">
        <img id="williamImgOverlay" alt="William character avatar" />
      </div>
      <h2>LEVEL UP!</h2>
      <div class="levelInfo">Level <span id="levelUpFrom"></span>  <span id="levelUpTo"></span></div>
      <div class="levelTitle" id="levelUpTitle"></div>
      <div class="levelSummary">
        <div class="levelName" id="levelUpName"></div>
        <div class="levelClass" id="levelUpClass"></div>
        <div class="levelStats" id="levelUpStats"></div>
        <div class="levelAbilities" id="levelUpAbilities"></div>
      </div>
    </div>
  </div>
  
  <!-- William Rest State Overlay -->
  <div id="williamRestOverlay">
    <div class="message"> I'm on a break for a minute. </div>
    <div class="countdown">Time remaining: <span id="restCountdown">60</span>s</div>
    <div class="zzz">Zzz...</div>
  </div>
  
  <!-- Companion Reward Card Overlay -->
  <div id="companionRewardOverlay">
    <div class="content">
      <div class="rewardAvatar"><img id="rewardCompImg" alt="Companion portrait"></div>
      <span class="rewardEmoji" id="rewardEmoji"></span>
      <div class="rewardHeading">COMPANION LEVEL UP!</div>
      <div class="rewardName" id="rewardCompName"></div>
      <div class="rewardTitle" id="rewardCompClass"></div>
      <div class="rewardLevel">Level <span id="rewardCompFrom"></span>  <span id="rewardCompLevel"></span></div>
      <div class="rewardTitle" id="rewardCompTitle"></div>
      <div class="rewardStats" id="rewardCompStats"></div>
      <div class="rewardPower" id="rewardCompPower"></div>
    </div>
  </div>

  <!-- XP Recap Overlay -->
  <div id="xpRecapOverlay">
    <div class="content">
      <h2>XP Earned Today</h2>
      <div class="xpRecapValue" id="xpRecapValue"></div>
    </div>
  </div>

  <!-- Level Down Overlay -->
  <div id="levelDownOverlay">
    <div class="content">
      <h2> LEVEL DOWN! </h2>
      <div class="levelInfo">Dropped to Level <span id="levelDownNumber"></span></div>
      <div class="levelTitle" id="levelDownTitle"></div>
    </div>
  </div>

  <!-- Quest Lore Overlay -->
  <div id="questLoreOverlay" class="questLoreOverlay" aria-hidden="true">
    <div class="questLoreCard" role="dialog" aria-modal="true" aria-labelledby="questLoreTitle">
      <div class="questLoreHeader">
        <div class="questLoreTitleGroup">
          <h3 id="questLoreTitle"></h3>
          <span class="questLoreStatus" id="questLoreStatus"></span>
        </div>
        <button class="questLoreClose" id="questLoreClose" aria-label="Close quest lore"></button>
      </div>
      <div class="questLoreBody">
        <div class="questLoreStory" id="questLoreStory"></div>
        <div class="questLoreEnemies">
          <div class="questLoreEnemiesTitle">What you'll face</div>
          <div id="questLoreEnemiesList"></div>
        </div>
      </div>
      <div class="questLoreFooter">
        <div class="questLoreLock" id="questLoreLock"></div>
        <button class="questLoreCta" id="questLoreCta" type="button">Enter Battle</button>
      </div>
    </div>
  </div>
</div>

<script id="questZonesData" type="application/json">
{
  "zones": [
    {
      "id": "z1",
      "cardId": "zone1",
      "assetKey": "z1",
      "name": "Launch Meadow",
      "unlockDays": 0,
      "story": "Welcome to the first training grounds. The meadow looks peaceful but mischievous critters hide in the grass and test new adventurers. This is where William learns to stay brave, move fast, and protect his friends.",
      "enemies": [
        {
          "name": "Dandelion Dagger",
          "behavior": "quick slashes + trick blinds",
          "moves": [
            { "name": "Puff Slash" },
            { "name": "Seed Sprint" }
          ]
        },
        {
          "name": "Mudkip Bandit",
          "behavior": "muddy debuffs + defense stance",
          "moves": [
            { "name": "Mud Toss" },
            { "name": "Puddle Guard" }
          ]
        },
        {
          "name": "Pebble Pouncer",
          "behavior": "pounces harder on slow targets",
          "moves": [
            { "name": "Pounce" },
            { "name": "Stone Skin" }
          ]
        },
        {
          "name": "Sunblink Moth",
          "behavior": "light blasts + team dazzle",
          "moves": [
            { "name": "Glimmer Beam" },
            { "name": "Dazzle" }
          ]
        },
        {
          "name": "Thorny Sneak",
          "behavior": "roots you, steals health",
          "moves": [
            { "name": "Thorn Trap" },
            { "name": "Sucker Vine" }
          ]
        },
        {
          "name": "Puddle Hexer",
          "behavior": "weakens defense + hits buffed heroes harder",
          "moves": [
            { "name": "Ink Splash" },
            { "name": "Gloom Drip" }
          ]
        },
        {
          "name": "Windwink Imp",
          "behavior": "fast pokes + enemy speed boost",
          "moves": [
            { "name": "Gust Jab" },
            { "name": "Slipstream" }
          ]
        },
        {
          "name": "Scorchling",
          "behavior": "burns + powers up",
          "moves": [
            { "name": "Ember Bite" },
            { "name": "Heat Up" }
          ]
        },
        {
          "name": "Barkhide Bully",
          "behavior": "taunts + bashes",
          "moves": [
            { "name": "Body Block" },
            { "name": "Bark Bash" }
          ]
        },
        {
          "name": "Spark Dustling",
          "behavior": "shocks + charges big hits",
          "moves": [
            { "name": "Static Pop" },
            { "name": "Charge" }
          ]
        },
        {
          "name": "Nightleaf Snatcher (Rare)",
          "behavior": "slows + dodges a hit",
          "moves": [
            { "name": "Swipe & Vanish" },
            { "name": "Shadow Cloak" }
          ]
        },
        {
          "name": "Slimecap Trickster (Elite)",
          "behavior": "lowers team ATK + chills",
          "moves": [
            { "name": "Spore Mist" },
            { "name": "Slime Patch" },
            { "name": "Cap Bounce" }
          ]
        }
      ]
    },
    {
      "id": "z2",
      "cardId": "zone2",
      "assetKey": "z2",
      "name": "Homework Hills",
      "unlockDays": 3,
      "story": "Homework Hills is where distractions come alive. Notes flutter away, ink spills, and pop quizzes attack without warning. William must stay calm, keep trying, and finish strongone problem at a time.",
      "enemies": [
        {
          "name": "Eraser Wraith",
          "behavior": "weakens defense + quick swipe",
          "moves": [
            { "name": "Erase Confidence" },
            { "name": "Smudge Swipe" }
          ]
        },
        {
          "name": "Paper Cut Pirate",
          "behavior": "hits harder if youre debuffed + blinds",
          "moves": [
            { "name": "Cutlass Cut" },
            { "name": "Ruffle Gust" }
          ]
        },
        {
          "name": "Inkblob Gremlin",
          "behavior": "guaranteed blind + simple bolt",
          "moves": [
            { "name": "Ink Spray" },
            { "name": "Blob Bolt" }
          ]
        },
        {
          "name": "Quiz Golemlet",
          "behavior": "forces action loss + heavy hit",
          "moves": [
            { "name": "Pop Quiz" },
            { "name": "Stone Thump" }
          ]
        },
        {
          "name": "Deadline Drake (Rare)",
          "behavior": "burns + slows the team",
          "moves": [
            { "name": "Late Fee Flame" },
            { "name": "Pressure Roar" }
          ]
        },
        {
          "name": "Scribble Sorcerer",
          "behavior": "shocks + team guard",
          "moves": [
            { "name": "Zap Diagram" },
            { "name": "Equation Shield" }
          ]
        },
        {
          "name": "Binder Beast",
          "behavior": "roots + slam",
          "moves": [
            { "name": "Clamp" },
            { "name": "Ring Slam" }
          ]
        },
        {
          "name": "Procrastination Poltergeist (Rare)",
          "behavior": "chance to skip actions + lowers ATK",
          "moves": [
            { "name": "Snooze Field" },
            { "name": "Delay Toxin" }
          ]
        },
        {
          "name": "Sticky Note Swarm",
          "behavior": "slows the team",
          "moves": [
            { "name": "Cling" },
            { "name": "Reminder Buzz" }
          ]
        },
        {
          "name": "Graph Goblin",
          "behavior": "chills + fast poke",
          "moves": [
            { "name": "Slope Slip" },
            { "name": "Ruler Rap" }
          ]
        },
        {
          "name": "Red Pen Reaper (Elite)",
          "behavior": "punishes weak heroes + forces skip",
          "moves": [
            { "name": "Correction Strike" },
            { "name": "Mark Wrong" },
            { "name": "Final Grade" }
          ]
        },
        {
          "name": "Homework Hydra (Elite)",
          "behavior": "team damage + team heal + ATK down",
          "moves": [
            { "name": "Assignment Flood" },
            { "name": "Extra Credit" },
            { "name": "Overwhelm" }
          ]
        }
      ]
    },
    {
      "id": "z3",
      "cardId": "zone3",
      "assetKey": "z3",
      "name": "Backpack Bastion",
      "unlockDays": 5,
      "story": "Backpack Bastion is a fortress of gear and order. But sneaky pests break straps, steal supplies, and jam zippers. To win here, William must pack smart, check twice, and defend the team.",
      "enemies": [
        {
          "name": "Strap Snapper",
          "behavior": "fast hits + reduces defense",
          "moves": [
            { "name": "Buckle Bite" },
            { "name": "Fray" }
          ]
        },
        {
          "name": "Zipperfang",
          "behavior": "medium slashes + dodge",
          "moves": [
            { "name": "Zip Slash" },
            { "name": "Unzip Escape" }
          ]
        },
        {
          "name": "Cargo Crab",
          "behavior": "guards + clamps",
          "moves": [
            { "name": "Crate Guard" },
            { "name": "Clamp Crush" }
          ]
        },
        {
          "name": "Pocket Mimic (Rare)",
          "behavior": "lifesteal + roots",
          "moves": [
            { "name": "Snack Snatch" },
            { "name": "False Bottom" }
          ]
        },
        {
          "name": "Buckle Brute",
          "behavior": "medium hits + defense stance",
          "moves": [
            { "name": "Buckle Bash" },
            { "name": "Iron Stance" }
          ]
        },
        {
          "name": "Lunchbox Lurker",
          "behavior": "lowers hero ATK + dark bolt",
          "moves": [
            { "name": "Stale Cloud" },
            { "name": "Mold Bolt" }
          ]
        },
        {
          "name": "Waterbottle Wobbler",
          "behavior": "heals allies + chills",
          "moves": [
            { "name": "Splash Heal" },
            { "name": "Soak" }
          ]
        },
        {
          "name": "Pencil Pike",
          "behavior": "quick jabs + possible blind",
          "moves": [
            { "name": "Point Jab" },
            { "name": "Shavings Storm" }
          ]
        },
        {
          "name": "Supply Sapper (Rare)",
          "behavior": "removes buffs + hits buffed targets harder",
          "moves": [
            { "name": "Steal Charge" },
            { "name": "Sneak Strike" }
          ]
        },
        {
          "name": "Tag Tornado",
          "behavior": "team damage + roots",
          "moves": [
            { "name": "Whirlwind" },
            { "name": "Receipt Wrap" }
          ]
        },
        {
          "name": "Locker Lizard (Rare)",
          "behavior": "team guard + heavy hit",
          "moves": [
            { "name": "Door Shield" },
            { "name": "Tail Slam" }
          ]
        },
        {
          "name": "Patchwork Punisher (Elite)",
          "behavior": "high damage + enemy DEF boost + shock chance",
          "moves": [
            { "name": "Patch Smash" },
            { "name": "Reinforce" },
            { "name": "Break Strap" }
          ]
        }
      ]
    },
    {
      "id": "z4",
      "cardId": "zone4",
      "assetKey": "z4",
      "name": "Focus Forest",
      "unlockDays": 10,
      "story": "Focus Forest is calm until it isnt. Whispering shadows distract you, bright lights confuse you, and ancient guardians test your patience. Here, William learns true focus: slow breath, clear mind, steady effort.",
      "enemies": [
        {
          "name": "Rune Stag",
          "behavior": "medium damage + team Focus",
          "moves": [
            { "name": "Rune Charge" },
            { "name": "Inspire" }
          ]
        },
        {
          "name": "Whisper Viper",
          "behavior": "lowers ATK + fast bite",
          "moves": [
            { "name": "Venom Whisper" },
            { "name": "Quick Bite" }
          ]
        },
        {
          "name": "Mist Monk",
          "behavior": "enemy team heal + team guard",
          "moves": [
            { "name": "Calm Wave" },
            { "name": "Mist Veil" }
          ]
        },
        {
          "name": "Thorn Sentinel (Rare)",
          "behavior": "guards + reflects minor damage",
          "moves": [
            { "name": "Bramble Wall" },
            { "name": "Thorn Counter" }
          ]
        },
        {
          "name": "Lumen Owl",
          "behavior": "medium damage + guaranteed blind",
          "moves": [
            { "name": "Lumen Ray" },
            { "name": "Blinding Flutter" }
          ]
        },
        {
          "name": "Shadowcap Shaman (Rare)",
          "behavior": "weakens defense + hits debuffed harder",
          "moves": [
            { "name": "Spores of Doubt" },
            { "name": "Night Bloom" }
          ]
        },
        {
          "name": "Breeze Banshee",
          "behavior": "chance to skip actions + medium damage",
          "moves": [
            { "name": "Haunting Gust" },
            { "name": "Slice Wind" }
          ]
        },
        {
          "name": "Stone Trancebear",
          "behavior": "slows team + roots",
          "moves": [
            { "name": "Trance Roar" },
            { "name": "Boulder Hug" }
          ]
        },
        {
          "name": "Sparkroot Warden (Rare)",
          "behavior": "high damage + shock chance + self heal",
          "moves": [
            { "name": "Root Shock" },
            { "name": "Charge Sap" }
          ]
        },
        {
          "name": "Moonveil Panther (Rare)",
          "behavior": "punishes weakest hero + dodge",
          "moves": [
            { "name": "Moon Pounce" },
            { "name": "Veil Step" }
          ]
        },
        {
          "name": "Crystal Mantis (Elite)",
          "behavior": "high damage + team chill + guard",
          "moves": [
            { "name": "Crystal Slice" },
            { "name": "Freeze Frame" },
            { "name": "Mirror Shell" }
          ]
        },
        {
          "name": "Ancient Grove Guardian (Elite)",
          "behavior": "team guard + root + big slam",
          "moves": [
            { "name": "Sanctuary Bark" },
            { "name": "Root Judgment" },
            { "name": "Radiant Slam" }
          ]
        }
      ]
    }
  ]
}
</script>

<!-- Howler.js Audio Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js" integrity="sha512-xi/RZRIF/S0hJ+yJJYuZ5yk6/8pCiRlEXZzoguSMl+vk2i3m6UjUO/WcZ11blRL/O+rnj94JRGwt/CHbc9+6EA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="./js/hub.js"></script>

</body>
</html>
